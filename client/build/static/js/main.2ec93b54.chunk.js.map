{"version":3,"sources":["components/Meeting.js","components/Home.js","routes.js","App.js","reportWebVitals.js","index.js"],"names":["videoGrid","id","scrId","localStream","localScreen","socket","roomId","Home","navigate","useNavigate","useState","setRoomId","useEffect","axios","get","then","res","console","log","data","catch","err","response","style","height","margin","display","alignItems","width","marginRight","color","textAlign","padding","dispaly","flexDirection","maxWidth","flexWrap","Typography","fontSize","overflowY","backgroundColor","whiteSpace","Button","variant","borderRadius","justifyContent","onClick","useStyles","makeStyles","root","grid","overflowX","controls","position","bottom","loader","join","textTransform","fontWeight","transition","mediaConstraints","audio","video","iceServers","urls","scrSocket","conn","scrConn","Meeting","classes","setJoin","loading","setLoading","showControls","setShowControls","setCount","mic","setMic","cam","setCam","scrn","setScrn","enqueueSnackbar","useSnackbar","handleClick","message","getReady","a","url","window","location","href","split","length","document","getElementById","myVideo","createElement","muted","navigator","mediaDevices","getUserMedia","stream","addVideoStream","setTimeout","alert","error","addEventListener","event","delta","deltaY","scrollLeft","toggleMic","joined","getTracks","audTrack","find","el","kind","readyState","enabled","stop","removeTrack","addTrack","userId","getSenders","replaceTrack","toggleCam","vidTrack","emit","toggleCard","status","vid","prof","classList","contains","remove","add","screenShare","getDisplayMedia","onended","disconnect","io","connect","on","myId","rtcPeerConnection","RTCPeerConnection","forEach","track","onicecandidate","candidate","label","sdpMLineIndex","createOffer","sessionDescription","setLocalDescription","type","sdp","setRemoteDescription","RTCSessionDescription","createAnswer","RTCIceCandidate","addIceCandidate","close","audEl","count","vidEl","div","setAttribute","srcObject","play","startsWith","cDiv","p","innerText","append","addLocalTracks","setRemoteStream","streams","sendIceCandidate","className","CircularProgress","ontrack","IconButton","marginLeft","routes","path","children","element","to","replace","App","routing","useRoutes","maxSnack","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render"],"mappings":"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","file":"static/js/main.2ec93b54.chunk.js","sourcesContent":["import \"./Meeting.css\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport { useSnackbar } from \"notistack\";\r\n\r\nimport { IconButton, Button, CircularProgress } from \"@material-ui/core\";\r\n\r\nimport MicRoundedIcon from \"@material-ui/icons/MicRounded\";\r\nimport MicOffRoundedIcon from \"@material-ui/icons/MicOffRounded\";\r\n\r\nimport VideocamRoundedIcon from \"@material-ui/icons/VideocamRounded\";\r\nimport VideocamOffRoundedIcon from \"@material-ui/icons/VideocamOffRounded\";\r\n\r\nimport ScreenShareRoundedIcon from \"@material-ui/icons/ScreenShareRounded\";\r\nimport StopScreenShareRoundedIcon from \"@material-ui/icons/StopScreenShareRounded\";\r\n\r\nimport FlipCameraAndroidIcon from \"@material-ui/icons/FlipCameraAndroid\";\r\n\r\nimport io from \"socket.io-client\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    height: \"100vh\",\r\n    backgroundColor: \"#141414\",\r\n  },\r\n  grid: {\r\n    height: \"calc(100vh - 70px)\",\r\n    width: \"100vw\",\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    overflowX: \"auto\",\r\n    overflowY: \"hidden\",\r\n    // justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  controls: {\r\n    backgroundColor: \"white\",\r\n    height: \"70px\",\r\n    width: \"100vw\",\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  loader: {\r\n    height: \"120px\",\r\n    width: \"100vw\",\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  join: {\r\n    textTransform: \"none\",\r\n    fontSize: \"20px\",\r\n    padding: \"4px 20px\",\r\n    marginRight: \"15px\",\r\n    fontWeight: 600,\r\n    transition: \"0.3s ease-in-out\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"rgb(0, 101, 255)\",\r\n      color: \"white\",\r\n    },\r\n  },\r\n});\r\n\r\nconst mediaConstraints = {\r\n  audio: true,\r\n  video: { width: 1280, height: 720 },\r\n};\r\n\r\nconst iceServers = {\r\n  iceServers: [\r\n    { urls: \"stun:stun.l.google.com:19302\" },\r\n    { urls: \"stun:stun1.l.google.com:19302\" },\r\n    { urls: \"stun:stun2.l.google.com:19302\" },\r\n    { urls: \"stun:stun3.l.google.com:19302\" },\r\n    { urls: \"stun:stun4.l.google.com:19302\" },\r\n  ],\r\n};\r\n\r\nlet videoGrid;\r\n\r\nlet id;\r\nlet scrId;\r\n\r\nlet localStream;\r\nlet localScreen;\r\n\r\nlet socket;\r\nlet scrSocket = null;\r\n\r\nlet roomId;\r\n\r\nlet conn = {};\r\nlet scrConn = {};\r\n\r\nconst Meeting = () => {\r\n  const classes = useStyles();\r\n\r\n  const [join, setJoin] = useState(-1);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showControls, setShowControls] = useState(false);\r\n\r\n  const [count, setCount] = useState(0);\r\n\r\n  const [mic, setMic] = useState(true);\r\n  const [cam, setCam] = useState(true);\r\n  const [scrn, setScrn] = useState(false);\r\n\r\n  // const flipButton = useRef(null);\r\n\r\n  const { enqueueSnackbar } = useSnackbar();\r\n\r\n  const handleClick = (message, variant) => {\r\n    enqueueSnackbar(message, { variant });\r\n  };\r\n\r\n  const getReady = async () => {\r\n    const url = window.location.href;\r\n    roomId = url.split(\"/\")[url.split(\"/\").length - 1];\r\n\r\n    videoGrid = document.getElementById(\"video-grid\");\r\n\r\n    const myVideo = document.createElement(\"video\");\r\n    myVideo.muted = true;\r\n\r\n    let stream;\r\n    try {\r\n      stream = await navigator.mediaDevices.getUserMedia(mediaConstraints);\r\n      // stream = await navigator.mediaDevices.getDisplayMedia();\r\n\r\n      localStream = stream;\r\n      addVideoStream(videoGrid, myVideo, stream, \"my-video\", true);\r\n\r\n      setLoading(false);\r\n      setTimeout(() => {\r\n        setShowControls(true);\r\n      }, [1000]);\r\n    } catch (error) {\r\n      alert(\"Could not get user media. Check your media devices or Refresh\");\r\n      console.error(\"Could not get user media\", error);\r\n    }\r\n\r\n    window.addEventListener(\"wheel\", (event) => {\r\n      // event.preventDefault();\r\n\r\n      const delta = event.deltaY;\r\n      document.getElementById(\"video-grid\").scrollLeft += delta * 0.5;\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getReady();\r\n  }, []);\r\n\r\n  const toggleMic = async (joined) => {\r\n    setMic((mic) => !mic);\r\n    console.log(localStream.getTracks());\r\n\r\n    let audTrack = localStream.getTracks().find((el) => {\r\n      return el.kind === \"audio\";\r\n    });\r\n\r\n    if (audTrack.readyState === \"live\") {\r\n      audTrack.enabled = !audTrack.enabled;\r\n\r\n      setTimeout(() => {\r\n        audTrack.stop();\r\n      }, 500);\r\n    } else {\r\n      try {\r\n        let stream = await navigator.mediaDevices.getUserMedia({\r\n          audio: true,\r\n        });\r\n\r\n        localStream.removeTrack(audTrack);\r\n        localStream.addTrack(stream.getTracks()[0]);\r\n\r\n        if (joined)\r\n          for (let userId in conn) {\r\n            console.log(conn[userId].getSenders());\r\n            conn[userId].getSenders()[0].replaceTrack(stream.getTracks()[0]);\r\n            console.log(conn[userId].getSenders());\r\n          }\r\n      } catch (error) {\r\n        alert(\"Could not get user media. Check your media devices or Refresh\");\r\n        console.error(\"Could not get user media\", error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const toggleCam = async (joined) => {\r\n    setCam((cam) => !cam);\r\n\r\n    let vidTrack = localStream.getTracks().find((el) => {\r\n      return el.kind === \"video\";\r\n    });\r\n\r\n    if (vidTrack.readyState === \"live\") {\r\n      vidTrack.enabled = !vidTrack.enabled;\r\n\r\n      setTimeout(() => {\r\n        vidTrack.stop();\r\n\r\n        if (id) {\r\n          socket.emit(\"video-stopped\", roomId, id);\r\n        }\r\n        toggleCard(\"my-video\", false);\r\n      }, 500);\r\n    } else {\r\n      let stream;\r\n      try {\r\n        stream = await navigator.mediaDevices.getUserMedia({\r\n          video: { width: 1280, height: 720 },\r\n        });\r\n\r\n        localStream.removeTrack(vidTrack);\r\n        localStream.addTrack(stream.getTracks()[0]);\r\n\r\n        if (joined)\r\n          for (let userId in conn) {\r\n            console.log(conn[userId].getSenders());\r\n            conn[userId].getSenders()[1].replaceTrack(stream.getTracks()[0]);\r\n          }\r\n\r\n        if (id) {\r\n          socket.emit(\"video-started\", roomId, id);\r\n        }\r\n        toggleCard(\"my-video\", true);\r\n      } catch (error) {\r\n        alert(\"Could not get user media. Check your media devices or Refresh\");\r\n        console.error(\"Could not get user media\", error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const toggleCard = (userId, status) => {\r\n    let vid, prof;\r\n\r\n    if (userId === \"my-video\") {\r\n      vid = document.getElementById(\"video-\" + userId);\r\n      prof = document.getElementById(\"prof-\" + userId);\r\n    } else {\r\n      vid = document.getElementById(\"video-VID-\" + userId);\r\n      prof = document.getElementById(\"prof-VID-\" + userId);\r\n    }\r\n\r\n    if (status && vid.classList.contains(\"hidden\")) {\r\n      vid.classList.remove(\"hidden\");\r\n      prof.classList.add(\"hidden\");\r\n    } else if (!status && !vid.classList.contains(\"hidden\")) {\r\n      prof.classList.remove(\"hidden\");\r\n      vid.classList.add(\"hidden\");\r\n    }\r\n  };\r\n\r\n  const connectToSocket = () => {\r\n    socket = io.connect(\"/\");\r\n\r\n    socket.on(\"connected\", async (myId) => {\r\n      setJoin(1);\r\n      id = myId;\r\n\r\n      console.log(\"User Id : \" + id);\r\n\r\n      socket.emit(\"join-room\", roomId, id);\r\n\r\n      // SOCKET EVENT CALLBACKS =====================================================\r\n      socket.on(\"room_created\", async () => {\r\n        console.log(\"Socket event callback: room_created\");\r\n      });\r\n\r\n      socket.on(\"room_joined\", async () => {\r\n        console.log(\"Socket event callback: room_joined\");\r\n\r\n        socket.emit(\"start_call\", roomId, id, cam);\r\n      });\r\n\r\n      // SOCKET EVENT CALLBACKS =====================================================\r\n      socket.on(\"start_call\", async (userId, status) => {\r\n        console.log(\"Socket event callback: start_call from \" + userId);\r\n\r\n        let rtcPeerConnection = new RTCPeerConnection(iceServers);\r\n        addLocalTracks(rtcPeerConnection);\r\n\r\n        conn[userId] = rtcPeerConnection;\r\n\r\n        handleClick(userId + \" joined\", \"success\");\r\n\r\n        rtcPeerConnection.ontrack = (event) => {\r\n          setRemoteStream(event, userId, status);\r\n        };\r\n        rtcPeerConnection.onicecandidate = (event) => {\r\n          sendIceCandidate(event, userId);\r\n        };\r\n\r\n        await createOffer(rtcPeerConnection, userId);\r\n      });\r\n\r\n      socket.on(\"webrtc_offer\", async (event, userId) => {\r\n        console.log(\"Socket event callback: webrtc_offer from \" + userId);\r\n\r\n        let rtcPeerConnection = new RTCPeerConnection(iceServers);\r\n        addLocalTracks(rtcPeerConnection);\r\n\r\n        conn[userId] = rtcPeerConnection;\r\n\r\n        rtcPeerConnection.ontrack = (event) => {\r\n          console.log(event);\r\n          console.log(userId);\r\n          setRemoteStream(event, userId);\r\n        };\r\n        rtcPeerConnection.onicecandidate = (event) => {\r\n          sendIceCandidate(event, userId);\r\n        };\r\n        rtcPeerConnection.setRemoteDescription(\r\n          new RTCSessionDescription(event)\r\n        );\r\n\r\n        await createAnswer(rtcPeerConnection, userId);\r\n      });\r\n\r\n      socket.on(\"webrtc_answer\", (event, userId) => {\r\n        console.log(\"Socket event callback: webrtc_answer from \" + userId);\r\n\r\n        conn[userId].setRemoteDescription(new RTCSessionDescription(event));\r\n      });\r\n\r\n      socket.on(\"webrtc_ice_candidate\", (event, userId) => {\r\n        console.log(\r\n          \"Socket event callback: webrtc_ice_candidate from \" + userId\r\n        );\r\n\r\n        // ICE candidate configuration.\r\n        var candidate = new RTCIceCandidate({\r\n          sdpMLineIndex: event.label,\r\n          candidate: event.candidate,\r\n        });\r\n        conn[userId].addIceCandidate(candidate);\r\n      });\r\n\r\n      socket.on(\"video-stopped\", (userId) => {\r\n        console.log(\"video-stopped \" + userId);\r\n        toggleCard(userId, false);\r\n      });\r\n\r\n      socket.on(\"video-started\", (userId) => {\r\n        console.log(\"video-started \" + userId);\r\n        toggleCard(userId, true);\r\n      });\r\n\r\n      socket.on(\"user-disconnected\", (userId) => {\r\n        handleClick(userId + \" left\", \"error\");\r\n\r\n        if (conn[userId]) conn[userId].close();\r\n\r\n        const audEl = document.getElementById(\"AUD-\" + userId);\r\n        if (audEl) {\r\n          audEl.remove();\r\n          // setCount((count) => count - 1);\r\n        }\r\n        const vidEl = document.getElementById(\"VID-\" + userId);\r\n        if (vidEl) {\r\n          vidEl.remove();\r\n          // setCount((count) => count - 1);\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  const toggleScrn = async () => {\r\n    setScrn((scrn) => !scrn);\r\n\r\n    if (cam) {\r\n      setCam((cam) => !cam);\r\n      console.log(localStream.getTracks());\r\n\r\n      let vidTrack = localStream.getTracks().find((el) => {\r\n        return el.kind === \"video\";\r\n      });\r\n\r\n      if (vidTrack.readyState === \"live\") {\r\n        vidTrack.enabled = !vidTrack.enabled;\r\n\r\n        setTimeout(async () => {\r\n          vidTrack.stop();\r\n\r\n          try {\r\n            let stream = await navigator.mediaDevices.getDisplayMedia();\r\n            localStream.removeTrack(vidTrack);\r\n            localStream.addTrack(stream.getTracks()[0]);\r\n\r\n            console.log(localStream.getTracks());\r\n            for (let userId in conn) {\r\n              console.log(conn[userId].getSenders());\r\n              conn[userId].getSenders()[1].replaceTrack(stream.getTracks()[0]);\r\n            }\r\n\r\n            stream.getTracks()[0].onended = () => {\r\n              setScrn(false);\r\n              localStream.getTracks()[1].enabled = false;\r\n\r\n              for (let userId in conn) {\r\n                conn[userId].getSenders()[1].track.enabled = false;\r\n              }\r\n            };\r\n          } catch (error) {\r\n            alert(\"Could not get display media. Try again\");\r\n            console.error(\"Could not get display media\", error);\r\n          }\r\n        }, 500);\r\n      }\r\n    } else {\r\n      let vidTrack = localStream.getTracks().find((el) => {\r\n        return el.kind === \"video\";\r\n      });\r\n\r\n      console.log(vidTrack);\r\n\r\n      if (vidTrack.readyState === \"live\") {\r\n        console.log(localStream.getTracks());\r\n        vidTrack.enabled = !vidTrack.enabled;\r\n        setTimeout(() => {\r\n          vidTrack.stop();\r\n        }, 500);\r\n      } else {\r\n        let stream;\r\n        try {\r\n          stream = await navigator.mediaDevices.getDisplayMedia();\r\n          localStream.removeTrack(vidTrack);\r\n          localStream.addTrack(stream.getTracks()[0]);\r\n\r\n          console.log(localStream.getTracks());\r\n          for (let userId in conn) {\r\n            console.log(conn[userId].getSenders());\r\n            conn[userId].getSenders()[1].replaceTrack(stream.getTracks()[0]);\r\n          }\r\n\r\n          stream.getTracks()[0].onended = () => {\r\n            setScrn(false);\r\n            localStream.getTracks()[1].enabled = false;\r\n\r\n            for (let userId in conn) {\r\n              conn[userId].getSenders()[1].track.enabled = false;\r\n            }\r\n          };\r\n        } catch (error) {\r\n          alert(\"Could not get display media. Try again\");\r\n          console.error(\"Could not get display media\", error);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const screenShare = async () => {\r\n    if (scrSocket === null) {\r\n      // const myVideo = document.createElement(\"video\");\r\n      // myVideo.muted = true;\r\n\r\n      let stream;\r\n      try {\r\n        stream = await navigator.mediaDevices.getDisplayMedia();\r\n        // stream = await navigator.mediaDevices.getDisplayMedia();\r\n\r\n        localScreen = stream;\r\n        setScrn(true);\r\n        // addVideoStream(videoGrid, myVideo, stream, \"my-screen\");\r\n\r\n        stream.getTracks()[0].onended = () => {\r\n          setScrn(false);\r\n          scrSocket.disconnect();\r\n          scrSocket = null;\r\n        };\r\n\r\n        scrSocket = io.connect(\"/\");\r\n\r\n        scrSocket.on(\"connected\", async (myId) => {\r\n          setJoin(1);\r\n          scrId = myId;\r\n\r\n          console.log(\"User Id : \" + scrId);\r\n\r\n          scrSocket.emit(\"join-room\", roomId, scrId);\r\n\r\n          // SOCKET EVENT CALLBACKS =====================================================\r\n          scrSocket.on(\"room_created\", async () => {\r\n            console.log(\"Socket event callback: room_created\");\r\n          });\r\n\r\n          scrSocket.on(\"room_joined\", async () => {\r\n            console.log(\"Socket event callback: room_joined\");\r\n\r\n            scrSocket.emit(\"start_call\", roomId, scrId);\r\n          });\r\n\r\n          scrSocket.on(\"start_call\", async (userId) => {\r\n            console.log(\"Socket event callback: start_call from \" + userId);\r\n\r\n            let rtcPeerConnection = new RTCPeerConnection(iceServers);\r\n            // addLocalTracks(rtcPeerConnection);\r\n            localScreen.getTracks().forEach((track) => {\r\n              rtcPeerConnection.addTrack(track, localScreen);\r\n            });\r\n\r\n            scrConn[userId] = rtcPeerConnection;\r\n\r\n            // handleClick(userId + \" joined\", \"success\");\r\n\r\n            // rtcPeerConnection.ontrack = (event) => {\r\n            //   setRemoteStream(event, userId);\r\n            // };\r\n            rtcPeerConnection.onicecandidate = (event) => {\r\n              // sendIceCandidate(event, userId);\r\n              if (event.candidate) {\r\n                scrSocket.emit(\r\n                  \"webrtc_ice_candidate\",\r\n                  {\r\n                    roomId,\r\n                    label: event.candidate.sdpMLineIndex,\r\n                    candidate: event.candidate.candidate,\r\n                  },\r\n                  scrId\r\n                );\r\n              }\r\n            };\r\n\r\n            // await createOffer(rtcPeerConnection, userId);\r\n            let sessionDescription;\r\n            try {\r\n              sessionDescription = await rtcPeerConnection.createOffer();\r\n              rtcPeerConnection.setLocalDescription(sessionDescription);\r\n\r\n              scrSocket.emit(\r\n                \"webrtc_offer\",\r\n                {\r\n                  type: \"webrtc_offer\",\r\n                  sdp: sessionDescription,\r\n                  roomId,\r\n                },\r\n                userId,\r\n                scrId\r\n              );\r\n            } catch (error) {\r\n              console.error(error);\r\n            }\r\n          });\r\n\r\n          scrSocket.on(\"webrtc_offer\", async (event, userId) => {\r\n            console.log(\"Socket event callback: webrtc_offer from \" + userId);\r\n\r\n            let rtcPeerConnection = new RTCPeerConnection(iceServers);\r\n            // addLocalTracks(rtcPeerConnection);\r\n            localScreen.getTracks().forEach((track) => {\r\n              rtcPeerConnection.addTrack(track, localScreen);\r\n            });\r\n\r\n            scrConn[userId] = rtcPeerConnection;\r\n\r\n            // rtcPeerConnection.ontrack = (event) => {\r\n            //   setRemoteStream(event, userId);\r\n            // };\r\n            rtcPeerConnection.onicecandidate = (event) => {\r\n              // sendIceCandidate(event, userId);\r\n              if (event.candidate) {\r\n                scrSocket.emit(\r\n                  \"webrtc_ice_candidate\",\r\n                  {\r\n                    roomId,\r\n                    label: event.candidate.sdpMLineIndex,\r\n                    candidate: event.candidate.candidate,\r\n                  },\r\n                  scrId\r\n                );\r\n              }\r\n            };\r\n            rtcPeerConnection.setRemoteDescription(\r\n              new RTCSessionDescription(event)\r\n            );\r\n\r\n            // await createAnswer(rtcPeerConnection, userId);\r\n            let sessionDescription;\r\n            try {\r\n              sessionDescription = await rtcPeerConnection.createAnswer();\r\n              rtcPeerConnection.setLocalDescription(sessionDescription);\r\n\r\n              scrSocket.emit(\r\n                \"webrtc_answer\",\r\n                {\r\n                  type: \"webrtc_answer\",\r\n                  sdp: sessionDescription,\r\n                  roomId,\r\n                },\r\n                userId,\r\n                scrId\r\n              );\r\n            } catch (error) {\r\n              console.error(error);\r\n            }\r\n          });\r\n\r\n          scrSocket.on(\"webrtc_answer\", (event, userId) => {\r\n            console.log(\"Socket event callback: webrtc_answer from \" + userId);\r\n\r\n            scrConn[userId].setRemoteDescription(\r\n              new RTCSessionDescription(event)\r\n            );\r\n          });\r\n\r\n          scrSocket.on(\"webrtc_ice_candidate\", (event, userId) => {\r\n            console.log(\r\n              \"Socket event callback: webrtc_ice_candidate from \" + userId\r\n            );\r\n\r\n            // ICE candidate configuration.\r\n            var candidate = new RTCIceCandidate({\r\n              sdpMLineIndex: event.label,\r\n              candidate: event.candidate,\r\n            });\r\n            scrConn[userId].addIceCandidate(candidate);\r\n          });\r\n\r\n          scrSocket.on(\"user-disconnected\", (userId) => {\r\n            if (scrConn[userId]) scrConn[userId].close();\r\n\r\n            const audEl = document.getElementById(\"AUD-\" + userId);\r\n            if (audEl) {\r\n              audEl.remove();\r\n              setCount((count) => count - 1);\r\n            }\r\n            const vidEl = document.getElementById(\"VID-\" + userId);\r\n            if (vidEl) {\r\n              vidEl.remove();\r\n              setCount((count) => count - 1);\r\n            }\r\n          });\r\n        });\r\n      } catch (error) {\r\n        alert(\"Could not get display media. Try again\");\r\n        console.error(\"Could not get display media\", error);\r\n      }\r\n    } else {\r\n      setScrn(false);\r\n      scrSocket.disconnect();\r\n      scrSocket = null;\r\n      // document.getElementById(\"my-screen\").remove();\r\n    }\r\n  };\r\n\r\n  const addVideoStream = (videoGrid, video, stream, userId, status) => {\r\n    console.log(stream);\r\n    console.log(stream.getTracks());\r\n\r\n    let div;\r\n\r\n    video.setAttribute(\"id\", \"video-\" + userId);\r\n    video.srcObject = stream;\r\n    video.classList.add(\"video\");\r\n\r\n    video.addEventListener(\"loadedmetadata\", () => {\r\n      video.play();\r\n    });\r\n\r\n    if (userId.startsWith(\"VID-\") || userId === \"my-video\") {\r\n      div = document.createElement(\"div\");\r\n      div.setAttribute(\"id\", userId);\r\n      div.classList.add(\"video-wrap\");\r\n\r\n      const cDiv = document.createElement(\"div\");\r\n      cDiv.setAttribute(\"id\", \"prof-\" + userId);\r\n      cDiv.classList.add(\"prof-card\");\r\n      cDiv.classList.add(\"hidden\");\r\n      const p = document.createElement(\"p\");\r\n      p.innerText = userId;\r\n      p.classList.add(\"prof-text\");\r\n\r\n      cDiv.append(p);\r\n\r\n      div.append(video);\r\n      div.append(cDiv);\r\n\r\n      videoGrid.append(div);\r\n\r\n      if (!status) {\r\n        video.classList.add(\"hidden\");\r\n        cDiv.classList.remove(\"hidden\");\r\n      }\r\n    } else {\r\n      videoGrid.append(video);\r\n    }\r\n\r\n    // setCount((count) => count + 1);\r\n  };\r\n\r\n  // FUNCTIONS ==================================================================\r\n  function addLocalTracks(rtcPeerConnection) {\r\n    localStream.getTracks().forEach((track) => {\r\n      rtcPeerConnection.addTrack(track, localStream);\r\n    });\r\n  }\r\n\r\n  async function createOffer(rtcPeerConnection, userId) {\r\n    let sessionDescription;\r\n    try {\r\n      sessionDescription = await rtcPeerConnection.createOffer();\r\n      rtcPeerConnection.setLocalDescription(sessionDescription);\r\n\r\n      socket.emit(\r\n        \"webrtc_offer\",\r\n        {\r\n          type: \"webrtc_offer\",\r\n          sdp: sessionDescription,\r\n          roomId,\r\n        },\r\n        userId,\r\n        id\r\n      );\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  async function createAnswer(rtcPeerConnection, userId) {\r\n    let sessionDescription;\r\n    try {\r\n      sessionDescription = await rtcPeerConnection.createAnswer();\r\n      rtcPeerConnection.setLocalDescription(sessionDescription);\r\n\r\n      socket.emit(\r\n        \"webrtc_answer\",\r\n        {\r\n          type: \"webrtc_answer\",\r\n          sdp: sessionDescription,\r\n          roomId,\r\n        },\r\n        userId,\r\n        id\r\n      );\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  function setRemoteStream(event, userId, status) {\r\n    console.log(event.streams[0]);\r\n    console.log(event.streams[0].getTracks());\r\n    if (event.track.kind === \"audio\") {\r\n      let audio = document.createElement(\"audio\");\r\n      addVideoStream(\r\n        videoGrid,\r\n        audio,\r\n        event.streams[0],\r\n        \"AUD-\" + userId,\r\n        status\r\n      );\r\n    } else if (event.track.kind === \"video\") {\r\n      let video = document.createElement(\"video\");\r\n      video.muted = true;\r\n      addVideoStream(\r\n        videoGrid,\r\n        video,\r\n        event.streams[0],\r\n        \"VID-\" + userId,\r\n        status\r\n      );\r\n    }\r\n  }\r\n\r\n  function sendIceCandidate(event, userId) {\r\n    if (event.candidate) {\r\n      socket.emit(\r\n        \"webrtc_ice_candidate\",\r\n        {\r\n          roomId,\r\n          label: event.candidate.sdpMLineIndex,\r\n          candidate: event.candidate.candidate,\r\n        },\r\n        id\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div id=\"video-grid\" className={classes.grid}>\r\n        {loading ? <CircularProgress style={{ margin: \"auto\" }} /> : null}\r\n      </div>\r\n      {showControls ? (\r\n        <div className={classes.controls}>\r\n          {join === -1 ? (\r\n            <Button\r\n              variant=\"outlined\"\r\n              onClick={() => {\r\n                connectToSocket();\r\n                setJoin(0);\r\n              }}\r\n              className={classes.join}\r\n            >\r\n              Join\r\n            </Button>\r\n          ) : join === 0 ? (\r\n            <CircularProgress />\r\n          ) : null}\r\n          <IconButton\r\n            style={{ color: mic ? \"grey\" : \"red\", marginRight: \"10px\" }}\r\n            onClick={() => {\r\n              toggleMic(join === 1);\r\n            }}\r\n          >\r\n            {mic ? (\r\n              <MicRoundedIcon style={{ fontSize: \"30px\" }} />\r\n            ) : (\r\n              <MicOffRoundedIcon style={{ fontSize: \"30px\" }} />\r\n            )}\r\n          </IconButton>\r\n          <IconButton\r\n            style={{\r\n              color: cam ? \"grey\" : \"red\",\r\n              marginLeft: \"10px\",\r\n              marginRight: \"10px\",\r\n            }}\r\n            onClick={() => {\r\n              toggleCam(join === 1);\r\n            }}\r\n          >\r\n            {cam ? (\r\n              <VideocamRoundedIcon style={{ fontSize: \"30px\" }} />\r\n            ) : (\r\n              <VideocamOffRoundedIcon style={{ fontSize: \"30px\" }} />\r\n            )}\r\n          </IconButton>\r\n          {join === 1 ? (\r\n            <IconButton\r\n              style={{ color: scrn ? \"grey\" : \"red\", marginLeft: \"10px\" }}\r\n              onClick={() => {\r\n                // toggleScrn();\r\n                screenShare();\r\n              }}\r\n            >\r\n              {scrn ? (\r\n                <ScreenShareRoundedIcon style={{ fontSize: \"30px\" }} />\r\n              ) : (\r\n                <StopScreenShareRoundedIcon style={{ fontSize: \"30px\" }} />\r\n              )}\r\n            </IconButton>\r\n          ) : null}\r\n          {/* <IconButton\r\n          style={{ marginLeft: \"20px\", display: \"none\" }}\r\n          ref={flipButton}\r\n        >\r\n          <FlipCameraAndroidIcon style={{ fontSize: \"30px\" }} />\r\n        </IconButton> */}\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Meeting;\r\n","import React, { useEffect, useState } from \"react\";\r\n\r\nimport { Typography, Button } from \"@material-ui/core\";\r\nimport CallIcon from \"@material-ui/icons/Call\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport axios from \"axios\";\r\n\r\nconst Home = () => {\r\n  const navigate = useNavigate();\r\n\r\n  const [roomId, setRoomId] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"/api/call\")\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        setRoomId(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.response);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        height: \"100%\",\r\n        margin: \"0px 30px\",\r\n      }}\r\n    >\r\n      <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n        <CallIcon\r\n          style={{\r\n            width: \"50px\",\r\n            height: \"50px\",\r\n            marginRight: \"14px\",\r\n            color: \"rgb(0, 131, 255)\",\r\n          }}\r\n        />\r\n        <h1 style={{ textAlign: \"left\", padding: \"20px 0px\", margin: 0 }}>\r\n          Conference Call\r\n        </h1>\r\n      </div>\r\n\r\n      <div\r\n        style={{\r\n          dispaly: \"flex\",\r\n          flexDirection: \"column\",\r\n          maxWidth: \"fit-content\",\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            flexWrap: \"wrap\",\r\n            margin: \"20px 0px\",\r\n          }}\r\n        >\r\n          <Typography style={{ fontSize: \"18px\" }}>\r\n            Meeting ID&nbsp;&nbsp;&nbsp;\r\n          </Typography>\r\n          <div style={{ display: \"flex\", maxWidth: \"100%\" }}>\r\n            <div\r\n              style={{\r\n                padding: \"10px 14px\",\r\n                overflowY: \"auto\",\r\n                backgroundColor: \"rgb(0,0,0,0.1)\",\r\n              }}\r\n            >\r\n              <Typography style={{ whiteSpace: \"nowrap\" }}>{roomId}</Typography>\r\n            </div>\r\n            <Button variant=\"outlined\" style={{ borderRadius: 0 }}>\r\n              COPY\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <div style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button\r\n            variant=\"contained\"\r\n            style={{\r\n              backgroundColor: \"rgb(0, 131, 255)\",\r\n              color: \"white\",\r\n            }}\r\n            onClick={() => {\r\n              navigate(`/${roomId}`);\r\n            }}\r\n          >\r\n            START MEETING\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nimport Home from \"./components/Home\";\r\nimport Meeting from \"./components/Meeting\";\r\n\r\nconst routes = [\r\n  {\r\n    path: \"/\",\r\n    // element: <Layout />,\r\n    children: [\r\n      { path: \"/\", element: <Home /> },\r\n      { path: \"/:roomId\", element: <Meeting /> },\r\n      { path: \"*\", element: <Navigate to=\"/\" replace /> },\r\n    ],\r\n  },\r\n];\r\n\r\nexport default routes;\r\n","import React from \"react\";\r\n\r\nimport routes from \"./routes\";\r\n\r\nimport { useRoutes } from \"react-router-dom\";\r\nimport { SnackbarProvider, useSnackbar } from \"notistack\";\r\n\r\nfunction App() {\r\n  const routing = useRoutes(routes);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <SnackbarProvider maxSnack={3}>{routing}</SnackbarProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <App />\r\n  </BrowserRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}