{"version":3,"sources":["../node_modules/peerjs/dist sync","components/Meeting.js","components/Home.js","routes.js","App.js","reportWebVitals.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","videoGrid","localStream","socket","roomId","Home","navigate","useNavigate","useState","setRoomId","useEffect","axios","get","then","res","console","log","data","catch","err","response","style","margin","textAlign","display","alignItems","Typography","padding","backgroundColor","Button","variant","color","onClick","useStyles","makeStyles","root","grid","height","flexWrap","justifyContent","controls","width","position","bottom","loader","join","textTransform","fontSize","marginRight","fontWeight","transition","mediaConstraints","audio","video","iceServers","urls","conn","Meeting","classes","setJoin","loading","setLoading","showControls","setShowControls","setCount","mic","setMic","cam","setCam","enqueueSnackbar","useSnackbar","handleClick","message","a","url","window","location","href","split","length","document","getElementById","myVideo","createElement","muted","navigator","mediaDevices","getUserMedia","stream","alert","error","addVideoStream","setTimeout","toggleMic","joined","getTracks","audTrack","find","el","kind","readyState","enabled","stop","removeTrack","addTrack","userId","getSenders","replaceTrack","toggleCam","vidTrack","srcObject","setAttribute","classList","add","addEventListener","play","append","addLocalTracks","rtcPeerConnection","forEach","track","createOffer","sessionDescription","setLocalDescription","emit","type","sdp","createAnswer","setRemoteStream","event","streams","sendIceCandidate","candidate","label","sdpMLineIndex","className","CircularProgress","io","connect","on","myId","RTCPeerConnection","ontrack","onicecandidate","setRemoteDescription","RTCSessionDescription","RTCIceCandidate","addIceCandidate","close","vidEl","remove","count","IconButton","marginLeft","routes","path","children","element","to","replace","App","routing","useRoutes","maxSnack","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render"],"mappings":"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","file":"static/js/main.5de12aa2.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 128;","import \"./Meeting.css\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { useSnackbar } from \"notistack\";\n\nimport { IconButton, Button, CircularProgress } from \"@material-ui/core\";\n\nimport MicRoundedIcon from \"@material-ui/icons/MicRounded\";\nimport MicOffRoundedIcon from \"@material-ui/icons/MicOffRounded\";\n\nimport VideocamRoundedIcon from \"@material-ui/icons/VideocamRounded\";\nimport VideocamOffRoundedIcon from \"@material-ui/icons/VideocamOffRounded\";\n\nimport FlipCameraAndroidIcon from \"@material-ui/icons/FlipCameraAndroid\";\n\nimport Peer from \"peerjs\";\nimport io from \"socket.io-client\";\n\nconst useStyles = makeStyles({\n  root: {\n    backgroundColor: \"#141414\",\n  },\n  grid: {\n    height: \"100vh\",\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  controls: {\n    backgroundColor: \"white\",\n    height: \"70px\",\n    width: \"100vw\",\n    position: \"absolute\",\n    bottom: 0,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  loader: {\n    height: \"120px\",\n    width: \"100vw\",\n    position: \"absolute\",\n    bottom: 0,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  join: {\n    textTransform: \"none\",\n    fontSize: \"20px\",\n    padding: \"4px 20px\",\n    marginRight: \"15px\",\n    fontWeight: 600,\n    transition: \"0.3s ease-in-out\",\n    \"&:hover\": {\n      backgroundColor: \"rgb(0, 101, 255)\",\n      color: \"white\",\n    },\n  },\n});\n\nconst mediaConstraints = {\n  audio: true,\n  video: { width: 1280, height: 720 },\n};\n\nconst iceServers = {\n  iceServers: [\n    { urls: \"stun:stun.l.google.com:19302\" },\n    { urls: \"stun:stun1.l.google.com:19302\" },\n    { urls: \"stun:stun2.l.google.com:19302\" },\n    { urls: \"stun:stun3.l.google.com:19302\" },\n    { urls: \"stun:stun4.l.google.com:19302\" },\n  ],\n};\n\nlet id;\nlet videoGrid;\nlet localStream;\n\nlet socket;\nlet roomId;\n\nlet conn = {};\n\nconst Meeting = () => {\n  const classes = useStyles();\n\n  const [join, setJoin] = useState(-1);\n  const [loading, setLoading] = useState(true);\n  const [showControls, setShowControls] = useState(false);\n\n  const [count, setCount] = useState(0);\n\n  const [mic, setMic] = useState(true);\n  const [cam, setCam] = useState(true);\n\n  // const flipButton = useRef(null);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleClick = (message, variant) => {\n    enqueueSnackbar(message, { variant });\n  };\n\n  useEffect(async () => {\n    const url = window.location.href;\n    roomId = url.split(\"/\")[url.split(\"/\").length - 1];\n\n    videoGrid = document.getElementById(\"video-grid\");\n\n    const myVideo = document.createElement(\"video\");\n    myVideo.muted = true;\n\n    let stream;\n    try {\n      stream = await navigator.mediaDevices.getUserMedia(mediaConstraints);\n      // stream = await navigator.mediaDevices.getDisplayMedia();\n    } catch (error) {\n      alert(\"Could not get user media. Check your media devices or Refresh\");\n      console.error(\"Could not get user media\", error);\n    }\n\n    localStream = stream;\n    addVideoStream(videoGrid, myVideo, stream, \"my-video\");\n\n    setLoading(false);\n    setTimeout(() => {\n      setShowControls(true);\n    }, [1000]);\n  }, []);\n\n  const toggleMic = async (joined) => {\n    setMic((mic) => !mic);\n    console.log(localStream.getTracks());\n\n    let audTrack = localStream.getTracks().find((el) => {\n      return el.kind === \"audio\";\n    });\n\n    if (audTrack.readyState === \"live\") {\n      audTrack.enabled = !audTrack.enabled;\n\n      setTimeout(() => {\n        audTrack.stop();\n      }, 500);\n    } else {\n      try {\n        let stream = await navigator.mediaDevices.getUserMedia({\n          audio: true,\n        });\n\n        localStream.removeTrack(audTrack);\n        localStream.addTrack(stream.getTracks()[0]);\n\n        if (joined)\n          for (let userId in conn) {\n            console.log(conn[userId].getSenders());\n            conn[userId].getSenders()[0].replaceTrack(stream.getTracks()[0]);\n          }\n      } catch (error) {\n        console.error(\"Could not get user media\", error);\n      }\n    }\n  };\n\n  const toggleCam = async (joined) => {\n    setCam((cam) => !cam);\n    console.log(localStream.getTracks());\n\n    let vidTrack = localStream.getTracks().find((el) => {\n      return el.kind === \"video\";\n    });\n\n    if (vidTrack.readyState === \"live\") {\n      vidTrack.enabled = !vidTrack.enabled;\n\n      setTimeout(() => {\n        vidTrack.stop();\n      }, 500);\n    } else {\n      let stream;\n      try {\n        stream = await navigator.mediaDevices.getUserMedia({\n          video: { width: 1280, height: 720 },\n        });\n\n        localStream.removeTrack(vidTrack);\n        localStream.addTrack(stream.getTracks()[0]);\n\n        if (joined)\n          for (let userId in conn) {\n            console.log(conn[userId].getSenders());\n            conn[userId].getSenders()[1].replaceTrack(stream.getTracks()[0]);\n          }\n      } catch (error) {\n        console.error(\"Could not get user media\", error);\n      }\n    }\n  };\n\n  const connectToSocket = () => {\n    socket = io.connect(\"/\");\n\n    socket.on(\"connected\", async (myId) => {\n      setJoin(1);\n      id = myId;\n\n      console.log(\"User Id : \" + id);\n\n      socket.emit(\"join-room\", roomId, id);\n\n      // SOCKET EVENT CALLBACKS =====================================================\n      socket.on(\"room_created\", async () => {\n        console.log(\"Socket event callback: room_created\");\n      });\n\n      socket.on(\"room_joined\", async () => {\n        console.log(\"Socket event callback: room_joined\");\n\n        socket.emit(\"start_call\", roomId, id);\n      });\n\n      // SOCKET EVENT CALLBACKS =====================================================\n      socket.on(\"start_call\", async (userId) => {\n        console.log(\"Socket event callback: start_call from \" + userId);\n\n        let rtcPeerConnection = new RTCPeerConnection(iceServers);\n        addLocalTracks(rtcPeerConnection);\n\n        conn[userId] = rtcPeerConnection;\n\n        handleClick(userId + \" joined\", \"success\");\n\n        rtcPeerConnection.ontrack = (event) => {\n          setRemoteStream(event, userId);\n        };\n        rtcPeerConnection.onicecandidate = (event) => {\n          sendIceCandidate(event, userId);\n        };\n\n        await createOffer(rtcPeerConnection, userId);\n      });\n\n      socket.on(\"webrtc_offer\", async (event, userId) => {\n        console.log(\"Socket event callback: webrtc_offer from \" + userId);\n\n        let rtcPeerConnection = new RTCPeerConnection(iceServers);\n        addLocalTracks(rtcPeerConnection);\n\n        conn[userId] = rtcPeerConnection;\n\n        rtcPeerConnection.ontrack = (event) => {\n          setRemoteStream(event, userId);\n        };\n        rtcPeerConnection.onicecandidate = (event) => {\n          sendIceCandidate(event, userId);\n        };\n        rtcPeerConnection.setRemoteDescription(\n          new RTCSessionDescription(event)\n        );\n\n        await createAnswer(rtcPeerConnection, userId);\n      });\n\n      socket.on(\"webrtc_answer\", (event, userId) => {\n        console.log(\"Socket event callback: webrtc_answer from \" + userId);\n\n        conn[userId].setRemoteDescription(new RTCSessionDescription(event));\n      });\n\n      socket.on(\"webrtc_ice_candidate\", (event, userId) => {\n        console.log(\n          \"Socket event callback: webrtc_ice_candidate from \" + userId\n        );\n\n        // ICE candidate configuration.\n        var candidate = new RTCIceCandidate({\n          sdpMLineIndex: event.label,\n          candidate: event.candidate,\n        });\n        conn[userId].addIceCandidate(candidate);\n      });\n\n      socket.on(\"user-disconnected\", (userId) => {\n        handleClick(userId + \" left\", \"error\");\n\n        if (conn[userId]) conn[userId].close();\n\n        const vidEl = document.getElementById(userId);\n        if (vidEl) {\n          vidEl.remove();\n          setCount((count) => count - 1);\n        }\n      });\n    });\n  };\n\n  const addVideoStream = (videoGrid, video, stream, userId) => {\n    video.srcObject = stream;\n    video.setAttribute(\"id\", userId);\n    video.classList.add(\"video\");\n    video.addEventListener(\"loadedmetadata\", () => {\n      video.play();\n    });\n    videoGrid.append(video);\n\n    // setCount((count) => count + 1);\n  };\n\n  // FUNCTIONS ==================================================================\n  function addLocalTracks(rtcPeerConnection) {\n    localStream.getTracks().forEach((track) => {\n      rtcPeerConnection.addTrack(track, localStream);\n    });\n  }\n\n  async function createOffer(rtcPeerConnection, userId) {\n    let sessionDescription;\n    try {\n      sessionDescription = await rtcPeerConnection.createOffer();\n      rtcPeerConnection.setLocalDescription(sessionDescription);\n    } catch (error) {\n      console.error(error);\n    }\n\n    socket.emit(\n      \"webrtc_offer\",\n      {\n        type: \"webrtc_offer\",\n        sdp: sessionDescription,\n        roomId,\n      },\n      userId,\n      id\n    );\n  }\n\n  async function createAnswer(rtcPeerConnection, userId) {\n    let sessionDescription;\n    try {\n      sessionDescription = await rtcPeerConnection.createAnswer();\n      rtcPeerConnection.setLocalDescription(sessionDescription);\n    } catch (error) {\n      console.error(error);\n    }\n\n    socket.emit(\n      \"webrtc_answer\",\n      {\n        type: \"webrtc_answer\",\n        sdp: sessionDescription,\n        roomId,\n      },\n      userId,\n      id\n    );\n  }\n\n  function setRemoteStream(event, userId) {\n    console.log(event);\n    if (event.track.kind === \"video\") {\n      let video = document.createElement(\"video\");\n      addVideoStream(videoGrid, video, event.streams[0], userId);\n    }\n  }\n\n  function sendIceCandidate(event, userId) {\n    if (event.candidate) {\n      socket.emit(\n        \"webrtc_ice_candidate\",\n        {\n          roomId,\n          label: event.candidate.sdpMLineIndex,\n          candidate: event.candidate.candidate,\n        },\n        id\n      );\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      <div id=\"video-grid\" className={classes.grid}>\n        {loading ? <CircularProgress /> : null}\n      </div>\n      {showControls ? (\n        <div className={classes.controls}>\n          {join === -1 ? (\n            <Button\n              variant=\"outlined\"\n              onClick={() => {\n                connectToSocket();\n                setJoin(0);\n              }}\n              className={classes.join}\n            >\n              Join\n            </Button>\n          ) : join === 0 ? (\n            <CircularProgress />\n          ) : null}\n          <IconButton\n            style={{ color: mic ? \"grey\" : \"red\", marginRight: \"10px\" }}\n            onClick={() => {\n              toggleMic(join === 1);\n            }}\n          >\n            {mic ? (\n              <MicRoundedIcon style={{ fontSize: \"30px\" }} />\n            ) : (\n              <MicOffRoundedIcon style={{ fontSize: \"30px\" }} />\n            )}\n          </IconButton>\n          <IconButton\n            style={{ color: cam ? \"grey\" : \"red\", marginLeft: \"10px\" }}\n            onClick={() => {\n              toggleCam(join === 1);\n            }}\n          >\n            {cam ? (\n              <VideocamRoundedIcon style={{ fontSize: \"30px\" }} />\n            ) : (\n              <VideocamOffRoundedIcon style={{ fontSize: \"30px\" }} />\n            )}\n          </IconButton>\n          {/* <IconButton\n          style={{ marginLeft: \"20px\", display: \"none\" }}\n          ref={flipButton}\n        >\n          <FlipCameraAndroidIcon style={{ fontSize: \"30px\" }} />\n        </IconButton> */}\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default Meeting;\n","import React, { useEffect, useState } from \"react\";\n\nimport { Typography, Button } from \"@material-ui/core\";\n\nimport { useNavigate } from \"react-router-dom\";\n\nimport axios from \"axios\";\n\nconst Home = () => {\n  const navigate = useNavigate();\n\n  const [roomId, setRoomId] = useState(\"\");\n\n  useEffect(() => {\n    axios\n      .get(\"/api/call\")\n      .then((res) => {\n        console.log(res.data);\n        setRoomId(res.data);\n      })\n      .catch((err) => {\n        console.log(err.response);\n      });\n  }, []);\n\n  return (\n    <div style={{ margin: \"0px 0px 0px 30px\" }}>\n      <h1 style={{ textAlign: \"left\" }}>Video Conference App</h1>\n\n      <div style={{ display: \"flex\", alignItems: \"center\" }}>\n        <Typography>Your meeting ID</Typography>\n        <div\n          style={{\n            padding: \"10px 10px\",\n            margin: \"0px 20px\",\n            backgroundColor: \"rgb(0,0,0,0.1)\",\n          }}\n        >\n          {roomId}\n        </div>\n      </div>\n      <div style={{ display: \"flex\" }}>\n        <Button\n          variant=\"contained\"\n          style={{\n            backgroundColor: \"rgb(0, 131, 255)\",\n            color: \"white\",\n            margin: \"20px 100px\",\n          }}\n          onClick={() => {\n            navigate(`/${roomId}`);\n          }}\n        >\n          JOIN MEETING\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n","import React from \"react\";\nimport { Navigate } from \"react-router-dom\";\n\nimport Home from \"./components/Home\";\nimport Meeting from \"./components/Meeting\";\n\nconst routes = [\n  {\n    path: \"/\",\n    // element: <Layout />,\n    children: [\n      { path: \"/\", element: <Home /> },\n      { path: \"/:roomId\", element: <Meeting /> },\n      { path: \"*\", element: <Navigate to=\"/\" replace /> },\n    ],\n  },\n];\n\nexport default routes;\n","import \"./App.css\";\nimport React from \"react\";\n\nimport routes from \"./routes\";\n\nimport { useRoutes } from \"react-router-dom\";\nimport { SnackbarProvider, useSnackbar } from \"notistack\";\n\nfunction App() {\n  const routing = useRoutes(routes);\n\n  return (\n    <div className=\"App\">\n      <SnackbarProvider maxSnack={3}>{routing}</SnackbarProvider>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}