{"version":3,"sources":["../node_modules/peerjs/dist sync","components/Meeting.js","components/Home.js","routes.js","App.js","reportWebVitals.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","videoGrid","localStream","socket","roomId","Home","navigate","useNavigate","useState","setRoomId","useEffect","axios","get","then","res","console","log","data","catch","err","response","style","margin","textAlign","display","alignItems","Typography","padding","backgroundColor","Button","variant","color","onClick","useStyles","makeStyles","root","grid","height","flexWrap","controls","width","position","bottom","justifyContent","mediaConstraints","audio","video","iceServers","urls","conn","Meeting","classes","count","setCount","mic","setMic","cam","setCam","micButton","useRef","camButton","enqueueSnackbar","useSnackbar","handleClick","message","io","connect","url","window","location","href","split","length","document","getElementById","myVideo","createElement","muted","on","myId","a","navigator","mediaDevices","getUserMedia","stream","alert","error","addVideoStream","emit","current","addEventListener","getTracks","audTrack","find","el","kind","readyState","enabled","setTimeout","stop","userId","removeTrack","addTrack","getSenders","replaceTrack","vidTrack","addLocalTracks","rtcPeerConnection","RTCPeerConnection","ontrack","event","setRemoteStream","onicecandidate","sendIceCandidate","createOffer","setRemoteDescription","RTCSessionDescription","createAnswer","candidate","RTCIceCandidate","sdpMLineIndex","label","addIceCandidate","close","vidEl","remove","srcObject","setAttribute","classList","add","play","append","forEach","track","sessionDescription","setLocalDescription","type","sdp","streams","className","gridTemplateColumns","gridAutoRows","IconButton","ref","marginRight","fontSize","marginLeft","routes","path","children","element","to","replace","App","routing","useRoutes","maxSnack","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render"],"mappings":"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","file":"static/js/main.ce772658.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 128;","import \"./Meeting.css\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { useSnackbar } from \"notistack\";\n\nimport { IconButton } from \"@material-ui/core\";\n\nimport MicRoundedIcon from \"@material-ui/icons/MicRounded\";\nimport MicOffRoundedIcon from \"@material-ui/icons/MicOffRounded\";\n\nimport VideocamRoundedIcon from \"@material-ui/icons/VideocamRounded\";\nimport VideocamOffRoundedIcon from \"@material-ui/icons/VideocamOffRounded\";\n\nimport FlipCameraAndroidIcon from \"@material-ui/icons/FlipCameraAndroid\";\n\nimport Peer from \"peerjs\";\nimport io from \"socket.io-client\";\n\nconst useStyles = makeStyles({\n  root: {\n    backgroundColor: \"#141414\",\n  },\n  grid: {\n    height: \"100vh\",\n    display: \"flex\",\n    flexWrap: \"wrap\",\n  },\n  controls: {\n    backgroundColor: \"white\",\n    height: \"70px\",\n    width: \"100vw\",\n    position: \"absolute\",\n    bottom: 0,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n});\n\nconst mediaConstraints = {\n  audio: true,\n  video: { width: 1280, height: 720 },\n};\n\nconst iceServers = {\n  iceServers: [\n    { urls: \"stun:stun.l.google.com:19302\" },\n    { urls: \"stun:stun1.l.google.com:19302\" },\n    { urls: \"stun:stun2.l.google.com:19302\" },\n    { urls: \"stun:stun3.l.google.com:19302\" },\n    { urls: \"stun:stun4.l.google.com:19302\" },\n  ],\n};\n\nlet id;\nlet videoGrid;\nlet localStream;\n\nlet socket;\nlet roomId;\n\nlet conn = {};\n\nconst Meeting = () => {\n  const classes = useStyles();\n\n  const [count, setCount] = useState(0);\n\n  const [mic, setMic] = useState(true);\n  const [cam, setCam] = useState(true);\n\n  const micButton = useRef(null);\n  const camButton = useRef(null);\n  // const flipButton = useRef(null);\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleClick = (message, variant) => {\n    enqueueSnackbar(message, { variant });\n  };\n\n  useEffect(() => {\n    socket = io.connect(\"/\");\n\n    const url = window.location.href;\n    roomId = url.split(\"/\")[url.split(\"/\").length - 1];\n\n    videoGrid = document.getElementById(\"video-grid\");\n\n    const myVideo = document.createElement(\"video\");\n    myVideo.muted = true;\n\n    socket.on(\"connected\", async (myId) => {\n      id = myId;\n\n      console.log(\"User Id : \" + id);\n\n      let stream;\n      try {\n        stream = await navigator.mediaDevices.getUserMedia(mediaConstraints);\n      } catch (error) {\n        alert(\"Could not get user media. Check your media devices or Refresh\");\n        console.error(\"Could not get user media\", error);\n      }\n\n      localStream = stream;\n      addVideoStream(videoGrid, myVideo, stream, id);\n\n      socket.emit(\"join-room\", roomId, id);\n\n      micButton.current.addEventListener(\"click\", async () => {\n        setMic((mic) => !mic);\n        console.log(localStream.getTracks());\n\n        let audTrack = localStream.getTracks().find((el) => {\n          return el.kind === \"audio\";\n        });\n\n        if (audTrack.readyState === \"live\") {\n          audTrack.enabled = !audTrack.enabled;\n\n          setTimeout(() => {\n            audTrack.stop();\n          }, 500);\n        } else {\n          try {\n            let stream = await navigator.mediaDevices.getUserMedia({\n              audio: true,\n            });\n\n            localStream.removeTrack(audTrack);\n            localStream.addTrack(stream.getTracks()[0]);\n\n            for (let userId in conn) {\n              console.log(conn[userId].getSenders());\n              conn[userId].getSenders()[0].replaceTrack(stream.getTracks()[0]);\n            }\n          } catch (error) {\n            console.error(\"Could not get user media\", error);\n          }\n        }\n      });\n\n      camButton.current.addEventListener(\"click\", async () => {\n        setCam((cam) => !cam);\n        console.log(localStream.getTracks());\n\n        let vidTrack = localStream.getTracks().find((el) => {\n          return el.kind === \"video\";\n        });\n\n        if (vidTrack.readyState === \"live\") {\n          vidTrack.enabled = !vidTrack.enabled;\n\n          setTimeout(() => {\n            vidTrack.stop();\n          }, 500);\n        } else {\n          let stream;\n          try {\n            stream = await navigator.mediaDevices.getUserMedia({\n              video: { width: 1280, height: 720 },\n            });\n\n            localStream.removeTrack(vidTrack);\n            localStream.addTrack(stream.getTracks()[0]);\n\n            for (let userId in conn) {\n              console.log(conn[userId].getSenders());\n              conn[userId].getSenders()[1].replaceTrack(stream.getTracks()[0]);\n            }\n          } catch (error) {\n            console.error(\"Could not get user media\", error);\n          }\n        }\n      });\n\n      // SOCKET EVENT CALLBACKS =====================================================\n      socket.on(\"room_created\", async () => {\n        console.log(\"Socket event callback: room_created\");\n      });\n\n      socket.on(\"room_joined\", async () => {\n        console.log(\"Socket event callback: room_joined\");\n\n        socket.emit(\"start_call\", roomId, id);\n      });\n\n      // SOCKET EVENT CALLBACKS =====================================================\n      socket.on(\"start_call\", async (userId) => {\n        console.log(\"Socket event callback: start_call from \" + userId);\n\n        let rtcPeerConnection = new RTCPeerConnection(iceServers);\n        addLocalTracks(rtcPeerConnection);\n\n        conn[userId] = rtcPeerConnection;\n\n        handleClick(userId + \" joined\", \"success\");\n\n        rtcPeerConnection.ontrack = (event) => {\n          setRemoteStream(event, userId);\n        };\n        rtcPeerConnection.onicecandidate = (event) => {\n          sendIceCandidate(event, userId);\n        };\n\n        await createOffer(rtcPeerConnection, userId);\n      });\n\n      socket.on(\"webrtc_offer\", async (event, userId) => {\n        console.log(\"Socket event callback: webrtc_offer from \" + userId);\n\n        let rtcPeerConnection = new RTCPeerConnection(iceServers);\n        addLocalTracks(rtcPeerConnection);\n\n        conn[userId] = rtcPeerConnection;\n\n        rtcPeerConnection.ontrack = (event) => {\n          setRemoteStream(event, userId);\n        };\n        rtcPeerConnection.onicecandidate = (event) => {\n          sendIceCandidate(event, userId);\n        };\n        rtcPeerConnection.setRemoteDescription(\n          new RTCSessionDescription(event)\n        );\n\n        await createAnswer(rtcPeerConnection, userId);\n      });\n\n      socket.on(\"webrtc_answer\", (event, userId) => {\n        console.log(\"Socket event callback: webrtc_answer from \" + userId);\n\n        conn[userId].setRemoteDescription(new RTCSessionDescription(event));\n      });\n\n      socket.on(\"webrtc_ice_candidate\", (event, userId) => {\n        console.log(\n          \"Socket event callback: webrtc_ice_candidate from \" + userId\n        );\n\n        // ICE candidate configuration.\n        var candidate = new RTCIceCandidate({\n          sdpMLineIndex: event.label,\n          candidate: event.candidate,\n        });\n        conn[userId].addIceCandidate(candidate);\n      });\n\n      socket.on(\"user-disconnected\", (userId) => {\n        handleClick(userId + \" left\", \"error\");\n\n        if (conn[userId]) conn[userId].close();\n\n        const vidEl = document.getElementById(userId);\n        if (vidEl) {\n          vidEl.remove();\n          setCount((count) => count - 1);\n        }\n      });\n    });\n  }, []);\n\n  const addVideoStream = (videoGrid, video, stream, userId) => {\n    video.srcObject = stream;\n    video.setAttribute(\"id\", userId);\n    video.classList.add(\"video\");\n    video.addEventListener(\"loadedmetadata\", () => {\n      video.play();\n    });\n    videoGrid.append(video);\n\n    // setCount((count) => count + 1);\n  };\n\n  // FUNCTIONS ==================================================================\n  function addLocalTracks(rtcPeerConnection) {\n    localStream.getTracks().forEach((track) => {\n      rtcPeerConnection.addTrack(track, localStream);\n    });\n  }\n\n  async function createOffer(rtcPeerConnection, userId) {\n    let sessionDescription;\n    try {\n      sessionDescription = await rtcPeerConnection.createOffer();\n      rtcPeerConnection.setLocalDescription(sessionDescription);\n    } catch (error) {\n      console.error(error);\n    }\n\n    socket.emit(\n      \"webrtc_offer\",\n      {\n        type: \"webrtc_offer\",\n        sdp: sessionDescription,\n        roomId,\n      },\n      userId,\n      id\n    );\n  }\n\n  async function createAnswer(rtcPeerConnection, userId) {\n    let sessionDescription;\n    try {\n      sessionDescription = await rtcPeerConnection.createAnswer();\n      rtcPeerConnection.setLocalDescription(sessionDescription);\n    } catch (error) {\n      console.error(error);\n    }\n\n    socket.emit(\n      \"webrtc_answer\",\n      {\n        type: \"webrtc_answer\",\n        sdp: sessionDescription,\n        roomId,\n      },\n      userId,\n      id\n    );\n  }\n\n  function setRemoteStream(event, userId) {\n    console.log(event);\n    if (event.track.kind === \"video\") {\n      let video = document.createElement(\"video\");\n      addVideoStream(videoGrid, video, event.streams[0], userId);\n    }\n  }\n\n  function sendIceCandidate(event, userId) {\n    if (event.candidate) {\n      socket.emit(\n        \"webrtc_ice_candidate\",\n        {\n          roomId,\n          label: event.candidate.sdpMLineIndex,\n          candidate: event.candidate.candidate,\n        },\n        id\n      );\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      {/* <h2>MEETING</h2> */}\n      <div\n        id=\"video-grid\"\n        className={classes.grid}\n        style={{\n          gridTemplateColumns: `repeat(auto-fill, ${\n            count > 0 ? 100 / count : 100\n          }vw)`,\n          gridAutoRows: \"calc(100vh - 70px)\",\n        }}\n      ></div>\n      <div className={classes.controls}>\n        <IconButton\n          ref={micButton}\n          style={{ color: mic ? \"grey\" : \"red\", marginRight: \"10px\" }}\n        >\n          {mic ? (\n            <MicRoundedIcon style={{ fontSize: \"30px\" }} />\n          ) : (\n            <MicOffRoundedIcon style={{ fontSize: \"30px\" }} />\n          )}\n        </IconButton>\n        <IconButton\n          ref={camButton}\n          style={{ color: cam ? \"grey\" : \"red\", marginLeft: \"10px\" }}\n        >\n          {cam ? (\n            <VideocamRoundedIcon style={{ fontSize: \"30px\" }} />\n          ) : (\n            <VideocamOffRoundedIcon style={{ fontSize: \"30px\" }} />\n          )}\n        </IconButton>\n        {/* <IconButton\n          style={{ marginLeft: \"20px\", display: \"none\" }}\n          ref={flipButton}\n        >\n          <FlipCameraAndroidIcon style={{ fontSize: \"30px\" }} />\n        </IconButton> */}\n      </div>\n    </div>\n  );\n};\n\nexport default Meeting;\n","import React, { useEffect, useState } from \"react\";\n\nimport { Typography, Button } from \"@material-ui/core\";\n\nimport { useNavigate } from \"react-router-dom\";\n\nimport axios from \"axios\";\n\nconst Home = () => {\n  const navigate = useNavigate();\n\n  const [roomId, setRoomId] = useState(\"\");\n\n  useEffect(() => {\n    axios\n      .get(\"/api/call\")\n      .then((res) => {\n        console.log(res.data);\n        setRoomId(res.data);\n      })\n      .catch((err) => {\n        console.log(err.response);\n      });\n  }, []);\n\n  return (\n    <div style={{ margin: \"0px 0px 0px 30px\" }}>\n      <h1 style={{ textAlign: \"left\" }}>Video Conference App</h1>\n\n      <div style={{ display: \"flex\", alignItems: \"center\" }}>\n        <Typography>Your meeting ID</Typography>\n        <div\n          style={{\n            padding: \"10px 10px\",\n            margin: \"0px 20px\",\n            backgroundColor: \"rgb(0,0,0,0.1)\",\n          }}\n        >\n          {roomId}\n        </div>\n      </div>\n      <div style={{ display: \"flex\" }}>\n        <Button\n          variant=\"contained\"\n          style={{\n            backgroundColor: \"rgb(0, 131, 255)\",\n            color: \"white\",\n            margin: \"20px 100px\",\n          }}\n          onClick={() => {\n            navigate(`/${roomId}`);\n          }}\n        >\n          JOIN MEETING\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n","import React from \"react\";\nimport { Navigate } from \"react-router-dom\";\n\nimport Home from \"./components/Home\";\nimport Meeting from \"./components/Meeting\";\n\nconst routes = [\n  {\n    path: \"/\",\n    // element: <Layout />,\n    children: [\n      { path: \"/\", element: <Home /> },\n      { path: \"/:roomId\", element: <Meeting /> },\n      { path: \"*\", element: <Navigate to=\"/\" replace /> },\n    ],\n  },\n];\n\nexport default routes;\n","import \"./App.css\";\nimport React from \"react\";\n\nimport routes from \"./routes\";\n\nimport { useRoutes } from \"react-router-dom\";\nimport { SnackbarProvider, useSnackbar } from \"notistack\";\n\nfunction App() {\n  const routing = useRoutes(routes);\n\n  return (\n    <div className=\"App\">\n      <SnackbarProvider maxSnack={3}>{routing}</SnackbarProvider>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}