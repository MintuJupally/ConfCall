{"version":3,"sources":["components/Meeting.js","components/Home.js","components/Messages.js","Layout.js","routes.js","App.js","reportWebVitals.js","index.js"],"names":["videoGrid","id","scrId","localStream","localScreen","socket","roomId","Alert","props","elevation","variant","Home","navigate","useNavigate","useState","setRoomId","open","setOpen","status","setStatus","user","setUser","useEffect","url","window","location","pathname","console","log","substr","axios","get","then","res","data","catch","err","response","handleClose","event","reason","style","minHeight","margin","display","alignItems","width","height","marginRight","color","textAlign","padding","dispaly","flexDirection","maxWidth","flexWrap","Typography","fontSize","overflowY","backgroundColor","whiteSpace","Button","borderRadius","onClick","el","document","createElement","value","href","body","appendChild","select","execCommand","removeChild","justifyContent","state","Snackbar","autoHideDuration","onClose","severity","className","clientId","render","renderProps","textTransform","SvgIcon","xmlns","transform","fill","d","Avatar","src","imageUrl","alt","givenName","email","CircularProgress","isSignedIn","onSuccess","profileObj","onFailure","cookiePolicy","icon","onAutoLoadFinished","useStyles","makeStyles","bubble","boxShadow","Messages","messages","classes","chat","setChat","slice","reverse","map","msg","index","time","toTimeString","timeString","split","parseInt","message","part","ind","Fragment","wordWrap","fontWeight","length","drawerWidth","theme","title","flexGrow","hide","drawer","flexShrink","drawerPaper","drawerHeader","spacing","mixins","toolbar","content","transition","transitions","create","easing","sharp","duration","leavingScreen","contentShift","easeOut","enteringScreen","root","grid","gridTemplateColumns","gridAutoRows","overflowX","controls","position","bottom","left","right","panel","loader","join","inputBox","outline","border","resize","cursor","mediaConstraints","audio","video","iceServers","camera","scrSocket","conn","scrConn","conv","Meeting","useTheme","setJoin","loading","setLoading","showControls","setShowControls","inputString","setInputString","setMessages","mic","setMic","cam","setCam","scrn","setScrn","openA","setOpenA","messageCount","setMessageCount","users","setUsers","chatBox","useRef","enqueueSnackbar","useSnackbar","handleClick","current","focus","chatScreen","getElementById","scrollTop","scrollHeight","sendMessage","fromId","text","trim","emit","curr","newMsg","Date","push","addEventListener","code","key","target","shiftKey","preventDefault","getReady","a","myVideo","muted","navigator","mediaDevices","getUserMedia","stream","addVideoStream","setTimeout","alert","error","turn","forEach","server","getTracks","track","stop","disconnect","toggleMic","joined","audTrack","find","kind","readyState","enabled","removeTrack","addTrack","userId","getSenders","replaceTrack","toggleCam","vidTrack","toggleCard","connectionState","vid","prof","classList","contains","remove","add","screenShare","getDisplayMedia","onended","io","connect","on","myId","rtcPeerConnection","RTCPeerConnection","onicecandidate","candidate","label","sdpMLineIndex","createOffer","sessionDescription","setLocalDescription","type","sdp","setRemoteDescription","RTCSessionDescription","createAnswer","RTCIceCandidate","addIceCandidate","close","audEl","vidEl","div","setAttribute","srcObject","play","substring","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","startsWith","cDiv","p","innerText","append","addLocalTracks","setRemoteStream","streams","sendIceCandidate","ontrack","onconnectionstatechange","restartIce","filtered","filter","IconButton","marginLeft","top","aria-label","edge","clsx","Badge","invisible","badgeContent","Drawer","anchor","paper","direction","Divider","ref","placeholder","onChange","val","trimStart","handleChange","disabled","Layout","useLocation","flag","setFlag","history","replaceState","updateFlag","routes","path","children","element","to","replace","App","routing","useRoutes","maxSnack","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM"],"mappings":"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","file":"static/js/main.69e01819.chunk.js","sourcesContent":["import \"./Meeting.css\";\r\n\r\nimport clsx from \"clsx\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\n\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport { useSnackbar } from \"notistack\";\r\n\r\nimport Messages from \"./Messages\";\r\n\r\nimport {\r\n  IconButton,\r\n  Button,\r\n  CircularProgress,\r\n  Drawer,\r\n  Divider,\r\n  Badge,\r\n} from \"@material-ui/core\";\r\n\r\nimport MicRoundedIcon from \"@material-ui/icons/MicRounded\";\r\nimport MicOffRoundedIcon from \"@material-ui/icons/MicOffRounded\";\r\n\r\nimport VideocamRoundedIcon from \"@material-ui/icons/VideocamRounded\";\r\nimport VideocamOffRoundedIcon from \"@material-ui/icons/VideocamOffRounded\";\r\n\r\nimport ScreenShareRoundedIcon from \"@material-ui/icons/ScreenShareRounded\";\r\nimport StopScreenShareRoundedIcon from \"@material-ui/icons/StopScreenShareRounded\";\r\n\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\n\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\n\r\nimport ForumIcon from \"@material-ui/icons/Forum\";\r\nimport PeopleAltOutlinedIcon from \"@material-ui/icons/PeopleAltOutlined\";\r\n\r\nimport io from \"socket.io-client\";\r\n\r\nimport axios from \"axios\";\r\n\r\nconst drawerWidth = \"min(calc(100vw - 20px), 400px)\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  chat: {\r\n    display: \"flex\",\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n  hide: {\r\n    display: \"none\",\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    backgroundColor: \"rgb(250,250,250)\",\r\n    width: drawerWidth,\r\n    height: \"calc(100vh - 80px)\",\r\n    margin: \"5px 10px 0px 5px\",\r\n    borderRadius: \"20px\",\r\n  },\r\n  drawerHeader: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    padding: theme.spacing(0, 1),\r\n    // necessary for content to be below app bar\r\n    ...theme.mixins.toolbar,\r\n    justifyContent: \"flex-start\",\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n    transition: theme.transitions.create(\"margin\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    marginRight: -drawerWidth,\r\n  },\r\n  contentShift: {\r\n    transition: theme.transitions.create(\"margin\", {\r\n      easing: theme.transitions.easing.easeOut,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    marginRight: 0,\r\n  },\r\n  root: {\r\n    height: \"100vh\",\r\n    backgroundColor: \"#141414\",\r\n  },\r\n  grid: {\r\n    // height: \"calc(100vh - 70px)\",\r\n    height: \"100vh\",\r\n    width: \"100vw\",\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"repeat(auto-fit,minmax(min(200px, 50vmin), 1fr))\",\r\n    gridAutoRows: \"minmax(min(200px, 50vmin), 1fr)\",\r\n    // flexWrap: \"wrap\",\r\n    overflowX: \"auto\",\r\n    // justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    transition: \"0.4s ease-in-out\",\r\n  },\r\n  controls: {\r\n    // backgroundColor: \"rgb(60,60,60)\",\r\n    height: \"70px\",\r\n    // width: \"100vw\",\r\n    position: \"fixed\",\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    margin: \"auto\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  panel: {\r\n    backgroundColor: \"rgb(60,60,60,0.8)\",\r\n    borderRadius: \"35px\",\r\n    padding: \"0px 30px\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n  loader: {\r\n    height: \"120px\",\r\n    width: \"100vw\",\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  join: {\r\n    textTransform: \"none\",\r\n    fontSize: \"20px\",\r\n    padding: \"4px 20px\",\r\n    marginRight: \"15px\",\r\n    fontWeight: 600,\r\n    borderRadius: \"30px\",\r\n    transition: \"0.3s ease-in-out\",\r\n    color: \"white\",\r\n    backgroundColor: \"rgb(0, 82, 206)\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"rgb(0, 101, 255)\",\r\n      color: \"white\",\r\n    },\r\n  },\r\n  inputBox: {\r\n    outline: 0,\r\n    backgroundColor: \"rgb(220,220,220)\",\r\n    width: \"300px\",\r\n    border: 0,\r\n    borderRadius: \"20px\",\r\n    height: \"20px\",\r\n    resize: \"none\",\r\n    padding: \"10px 15px\",\r\n    \"&::placeholder\": {},\r\n    \"&::-webkit-scrollbar\": {\r\n      display: \"none\",\r\n    },\r\n  },\r\n  user: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    cursor: \"pointer\",\r\n    padding: \"10px\",\r\n    backgroundColor: \"rgb(250,250,250)\",\r\n    transition: \"0.4s ease-in-out\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"rgb(240,240,240)\",\r\n    },\r\n  },\r\n}));\r\n\r\nconst mediaConstraints = {\r\n  audio: true,\r\n  video: { width: 1280, height: 720 },\r\n};\r\n\r\nconst iceServers = {\r\n  iceServers: [\r\n    { url: \"stun:stun.l.google.com:19302\" },\r\n    { url: \"stun:stun1.l.google.com:19302\" },\r\n    { url: \"stun:stun2.l.google.com:19302\" },\r\n    { url: \"stun:stun3.l.google.com:19302\" },\r\n    { url: \"stun:stun4.l.google.com:19302\" },\r\n    { url: \"stun:stun.12connect.com:3478\" },\r\n    { url: \"stun:stun.12voip.com:3478\" },\r\n  ],\r\n};\r\n\r\nlet videoGrid;\r\n\r\nlet id;\r\nlet scrId;\r\n\r\nlet camera = true;\r\n\r\nlet localStream;\r\nlet localScreen;\r\n\r\nlet socket;\r\nlet scrSocket = null;\r\n\r\nlet roomId;\r\n\r\nlet conn = {};\r\nlet scrConn = {};\r\n\r\nlet conv = [];\r\n\r\nconst Meeting = ({ user }) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [join, setJoin] = useState(-1);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showControls, setShowControls] = useState(false);\r\n\r\n  // const [count, setCount] = useState(0);\r\n\r\n  const [inputString, setInputString] = useState(\"\");\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  const [mic, setMic] = useState(true);\r\n  const [cam, setCam] = useState(true);\r\n  const [scrn, setScrn] = useState(false);\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [openA, setOpenA] = useState(false);\r\n\r\n  const [messageCount, setMessageCount] = useState(0);\r\n\r\n  const [users, setUsers] = useState([]);\r\n\r\n  const chatBox = useRef(null);\r\n\r\n  const { enqueueSnackbar } = useSnackbar();\r\n\r\n  const handleClick = (message, variant) => {\r\n    enqueueSnackbar(message, { variant });\r\n  };\r\n\r\n  const handleDrawerOpenA = () => {\r\n    setOpenA(true);\r\n  };\r\n  const handleDrawerOpen = () => {\r\n    setOpen(true);\r\n    setMessageCount(0);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      chatBox.current.focus();\r\n\r\n      const chatScreen = document.getElementById(\"chat-screen\");\r\n      if (chatScreen) {\r\n        chatScreen.scrollTop = chatScreen.scrollHeight;\r\n      }\r\n    }\r\n  }, [open]);\r\n\r\n  useEffect(() => {\r\n    if (messageCount === 0) document.title = \"Conf Call\";\r\n    else document.title = `(${messageCount}) Conf Call`;\r\n  }, [messageCount]);\r\n\r\n  const handleDrawerCloseA = () => {\r\n    setOpenA(false);\r\n  };\r\n  const handleDrawerClose = () => {\r\n    setOpen(false);\r\n    setMessageCount(0);\r\n  };\r\n\r\n  const handleChange = (event) => {\r\n    let text = event.target.value;\r\n    setInputString(text.trimStart());\r\n  };\r\n\r\n  const sendMessage = (fromId, msg) => {\r\n    let text;\r\n    if (msg) text = msg;\r\n    else {\r\n      let val = chatBox.current.value;\r\n      text = val.trim();\r\n    }\r\n\r\n    if (!fromId) socket.emit(\"send-message\", text);\r\n\r\n    let curr = [...conv];\r\n    console.log(curr);\r\n    const newMsg = {\r\n      user: fromId ? fromId : \"me\",\r\n      message: text,\r\n      time: new Date(),\r\n    };\r\n    curr.push(newMsg);\r\n    conv.push(newMsg);\r\n    setMessages(curr);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setInputString(\"\");\r\n    if (chatBox.current) chatBox.current.focus();\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    if (join === 1) {\r\n      chatBox.current.addEventListener(\"keyup\", (event) => {\r\n        if (event.code === \"Enter\" || event.key === \"Enter\") {\r\n          if (event.target.value !== \"\" && !event.shiftKey) sendMessage();\r\n        }\r\n      });\r\n      chatBox.current.addEventListener(\"keydown\", (event) => {\r\n        if (event.code === \"Enter\" || event.key === \"Enter\") {\r\n          if (!event.shiftKey) event.preventDefault();\r\n        }\r\n      });\r\n    }\r\n  }, [join]);\r\n\r\n  const getReady = async () => {\r\n    const url = window.location.href;\r\n    roomId = url.split(\"/\")[url.split(\"/\").length - 1];\r\n\r\n    videoGrid = document.getElementById(\"video-grid\");\r\n\r\n    const myVideo = document.createElement(\"video\");\r\n    myVideo.muted = true;\r\n\r\n    let stream;\r\n    try {\r\n      stream = await navigator.mediaDevices.getUserMedia(mediaConstraints);\r\n      // stream = await navigator.mediaDevices.getDisplayMedia();\r\n\r\n      localStream = stream;\r\n      addVideoStream(videoGrid, myVideo, stream, \"my-video\", true);\r\n\r\n      setLoading(false);\r\n      setTimeout(() => {\r\n        setShowControls(true);\r\n      }, [1000]);\r\n    } catch (error) {\r\n      alert(\"Could not get user media. Check your media devices or Refresh\");\r\n      console.error(\"Could not get user media\", error);\r\n    }\r\n\r\n    // window.addEventListener(\"wheel\", (event) => {\r\n    //   // event.preventDefault();\r\n\r\n    //   const delta = event.deltaY;\r\n    //   document.getElementById(\"video-grid\").scrollLeft += delta * 0.5;\r\n    // });\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"/api/turn\")\r\n      .then((res) => {\r\n        const turn = res.data;\r\n        if (turn.length !== 0) {\r\n          turn.forEach((server) => {\r\n            iceServers.iceServers.push({ url: server });\r\n          });\r\n          console.log(\"TURN enabled !!!\");\r\n        } else console.log(\"No TURN !!!\");\r\n\r\n        getReady();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    return () => {\r\n      if (localStream)\r\n        localStream.getTracks().forEach((track) => {\r\n          track.stop();\r\n        });\r\n      if (localScreen)\r\n        localScreen.getTracks().forEach((track) => {\r\n          track.stop();\r\n        });\r\n      if (socket) {\r\n        socket.disconnect();\r\n      }\r\n      if (scrSocket) {\r\n        scrSocket.disconnect();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const toggleMic = async (joined) => {\r\n    setMic((mic) => !mic);\r\n\r\n    let audTrack = localStream.getTracks().find((el) => {\r\n      return el.kind === \"audio\";\r\n    });\r\n\r\n    if (audTrack.readyState === \"live\") {\r\n      audTrack.enabled = !audTrack.enabled;\r\n\r\n      setTimeout(() => {\r\n        audTrack.stop();\r\n      }, 500);\r\n    } else {\r\n      try {\r\n        let stream = await navigator.mediaDevices.getUserMedia({\r\n          audio: true,\r\n        });\r\n\r\n        localStream.removeTrack(audTrack);\r\n        localStream.addTrack(stream.getTracks()[0]);\r\n\r\n        if (joined)\r\n          for (let userId in conn) {\r\n            conn[userId].getSenders()[0].replaceTrack(stream.getTracks()[0]);\r\n          }\r\n      } catch (error) {\r\n        alert(\"Could not get user media. Check your media devices or Refresh\");\r\n        console.error(\"Could not get user media\", error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const toggleCam = async (joined) => {\r\n    setCam((cam) => !cam);\r\n\r\n    let vidTrack = localStream.getTracks().find((el) => {\r\n      return el.kind === \"video\";\r\n    });\r\n\r\n    if (vidTrack.readyState === \"live\") {\r\n      vidTrack.enabled = !vidTrack.enabled;\r\n\r\n      setTimeout(() => {\r\n        vidTrack.stop();\r\n\r\n        if (id) {\r\n          socket.emit(\"video-stopped\", roomId, id);\r\n        }\r\n        toggleCard(\"my-video\", false);\r\n      }, 500);\r\n    } else {\r\n      let stream;\r\n      try {\r\n        stream = await navigator.mediaDevices.getUserMedia({\r\n          video: { width: 1280, height: 720 },\r\n        });\r\n\r\n        localStream.removeTrack(vidTrack);\r\n        localStream.addTrack(stream.getTracks()[0]);\r\n\r\n        if (joined)\r\n          for (let userId in conn) {\r\n            console.log(conn[userId].getSenders());\r\n            console.log(userId, conn[userId].connectionState);\r\n            conn[userId].getSenders()[1].replaceTrack(stream.getTracks()[0]);\r\n          }\r\n\r\n        if (id) {\r\n          socket.emit(\"video-started\", roomId, id);\r\n        }\r\n        toggleCard(\"my-video\", true);\r\n      } catch (error) {\r\n        alert(\"Could not get user media. Check your media devices or Refresh\");\r\n        console.error(\"Could not get user media\", error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const toggleCard = (userId, status) => {\r\n    let vid, prof;\r\n\r\n    if (userId === \"my-video\") {\r\n      vid = document.getElementById(\"video-\" + userId);\r\n      prof = document.getElementById(\"prof-\" + userId);\r\n    } else {\r\n      vid = document.getElementById(\"video-VID-\" + userId);\r\n      prof = document.getElementById(\"prof-VID-\" + userId);\r\n    }\r\n\r\n    if (!vid || !prof) return;\r\n\r\n    if (status && vid.classList.contains(\"hidden\")) {\r\n      vid.classList.remove(\"hidden\");\r\n      prof.classList.add(\"hidden\");\r\n    } else if (!status && !vid.classList.contains(\"hidden\")) {\r\n      prof.classList.remove(\"hidden\");\r\n      vid.classList.add(\"hidden\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    camera = cam;\r\n  }, [cam]);\r\n\r\n  const connectToSocket = () => {\r\n    socket = io.connect(\"/\");\r\n\r\n    socket.on(\"connected\", async (myId) => {\r\n      setJoin(1);\r\n      id = myId;\r\n\r\n      console.log(\"User Id : \" + id);\r\n\r\n      socket.emit(\"join-room\", roomId, id);\r\n\r\n      // SOCKET EVENT CALLBACKS =====================================================\r\n      socket.on(\"room_created\", async () => {\r\n        console.log(\"Socket event callback: room_created\");\r\n      });\r\n\r\n      socket.on(\"room_joined\", async () => {\r\n        console.log(\"Socket event callback: room_joined\");\r\n\r\n        socket.emit(\"start_call\", roomId, id, cam);\r\n      });\r\n\r\n      socket.on(\"start_call\", async (userId, status) => {\r\n        console.log(\"Socket event callback: start_call from \" + userId);\r\n\r\n        let rtcPeerConnection = new RTCPeerConnection(iceServers);\r\n        addLocalTracks(rtcPeerConnection);\r\n\r\n        conn[userId] = rtcPeerConnection;\r\n\r\n        setUsers((curr) => {\r\n          return [...curr, userId];\r\n        });\r\n\r\n        console.log(conn[userId].connectionState);\r\n        console.log(\"before \" + camera);\r\n\r\n        handleClick(userId + \" joined\", \"success\");\r\n\r\n        rtcPeerConnection.ontrack = (event) => {\r\n          setRemoteStream(event, userId, status);\r\n        };\r\n        rtcPeerConnection.onicecandidate = (event) => {\r\n          sendIceCandidate(event, userId);\r\n        };\r\n        rtcPeerConnection.onconnectionstatechange = (event) => {\r\n          console.log(event);\r\n          console.log(rtcPeerConnection.connectionState);\r\n          if (rtcPeerConnection.connectionState === \"failed\") {\r\n            console.log(\"Restarting Ice ...\");\r\n            rtcPeerConnection.restartIce();\r\n          }\r\n        };\r\n\r\n        await createOffer(rtcPeerConnection, userId);\r\n      });\r\n\r\n      socket.on(\"webrtc_offer\", async (event, userId, status) => {\r\n        console.log(\r\n          \"Socket event callback: webrtc_offer from \" + userId,\r\n          status\r\n        );\r\n\r\n        let rtcPeerConnection = new RTCPeerConnection(iceServers);\r\n        addLocalTracks(rtcPeerConnection);\r\n\r\n        conn[userId] = rtcPeerConnection;\r\n\r\n        setUsers((curr) => {\r\n          return [...curr, userId];\r\n        });\r\n\r\n        rtcPeerConnection.ontrack = (event) => {\r\n          setRemoteStream(event, userId, status);\r\n        };\r\n        rtcPeerConnection.onicecandidate = (event) => {\r\n          sendIceCandidate(event, userId);\r\n        };\r\n        rtcPeerConnection.setRemoteDescription(\r\n          new RTCSessionDescription(event)\r\n        );\r\n        rtcPeerConnection.onconnectionstatechange = (event) => {\r\n          console.log(event);\r\n          console.log(rtcPeerConnection.connectionState);\r\n        };\r\n\r\n        await createAnswer(rtcPeerConnection, userId);\r\n      });\r\n\r\n      socket.on(\"webrtc_answer\", (event, userId) => {\r\n        console.log(\"Socket event callback: webrtc_answer from \" + userId);\r\n\r\n        conn[userId].setRemoteDescription(new RTCSessionDescription(event));\r\n      });\r\n\r\n      socket.on(\"webrtc_ice_candidate\", (event, userId) => {\r\n        console.log(\r\n          \"Socket event callback: webrtc_ice_candidate from \" + userId\r\n        );\r\n\r\n        // ICE candidate configuration.\r\n        var candidate = new RTCIceCandidate({\r\n          sdpMLineIndex: event.label,\r\n          candidate: event.candidate,\r\n        });\r\n        conn[userId].addIceCandidate(candidate);\r\n      });\r\n\r\n      socket.on(\"video-stopped\", (userId) => {\r\n        console.log(\"video-stopped \" + userId);\r\n        toggleCard(userId, false);\r\n      });\r\n\r\n      socket.on(\"video-started\", (userId) => {\r\n        console.log(\"video-started \" + userId);\r\n        toggleCard(userId, true);\r\n      });\r\n\r\n      socket.on(\"connect_screen\", (fromId) => {\r\n        socket.emit(\"connect_screen\", fromId);\r\n      });\r\n\r\n      socket.on(\"incoming-message\", (fromId, msg) => {\r\n        sendMessage(fromId, msg);\r\n        setMessageCount((messageCount) => messageCount + 1);\r\n      });\r\n\r\n      socket.on(\"user-disconnected\", (userId) => {\r\n        if (conn[userId]) conn[userId].close();\r\n\r\n        setUsers((curr) => {\r\n          let filtered = curr.filter((el) => {\r\n            return el !== userId;\r\n          });\r\n          console.log(filtered);\r\n          return filtered;\r\n        });\r\n\r\n        const audEl = document.getElementById(\"AUD-\" + userId);\r\n        if (audEl) {\r\n          audEl.remove();\r\n        }\r\n        const vidEl = document.getElementById(\"VID-\" + userId);\r\n        if (vidEl) {\r\n          vidEl.remove();\r\n          handleClick(userId + \" left\", \"error\");\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  const screenShare = async () => {\r\n    if (scrSocket === null) {\r\n      // const myVideo = document.createElement(\"video\");\r\n      // myVideo.muted = true;\r\n\r\n      let stream;\r\n      try {\r\n        stream = await navigator.mediaDevices.getDisplayMedia();\r\n        // stream = await navigator.mediaDevices.getDisplayMedia();\r\n\r\n        localScreen = stream;\r\n        setScrn(true);\r\n        // addVideoStream(videoGrid, myVideo, stream, \"my-screen\");\r\n\r\n        stream.getTracks()[0].onended = () => {\r\n          setScrn(false);\r\n          scrSocket.disconnect();\r\n          scrSocket = null;\r\n        };\r\n\r\n        scrSocket = io.connect(\"/\");\r\n\r\n        scrSocket.on(\"connected\", async (myId) => {\r\n          setJoin(1);\r\n          scrId = myId;\r\n\r\n          console.log(\"Screenshare Id : \" + scrId);\r\n\r\n          scrSocket.emit(\"join-room\", roomId, scrId, id);\r\n\r\n          // SOCKET EVENT CALLBACKS =====================================================\r\n          scrSocket.on(\"room_created\", async () => {\r\n            console.log(\"Socket event callback: room_created\");\r\n          });\r\n\r\n          scrSocket.on(\"room_joined\", async () => {\r\n            console.log(\"Socket event callback: room_joined\");\r\n\r\n            scrSocket.emit(\"start_call\", roomId, scrId, true);\r\n          });\r\n\r\n          scrSocket.on(\"start_call\", async (userId, status) => {\r\n            console.log(\"Socket event callback: start_call from \" + userId);\r\n\r\n            let rtcPeerConnection = new RTCPeerConnection(iceServers);\r\n            // addLocalTracks(rtcPeerConnection);\r\n            localScreen.getTracks().forEach((track) => {\r\n              rtcPeerConnection.addTrack(track, localScreen);\r\n            });\r\n\r\n            scrConn[userId] = rtcPeerConnection;\r\n\r\n            // handleClick(userId + \" joined\", \"success\");\r\n\r\n            // rtcPeerConnection.ontrack = (event) => {\r\n            //   setRemoteStream(event, userId);\r\n            // };\r\n            rtcPeerConnection.onicecandidate = (event) => {\r\n              // sendIceCandidate(event, userId);\r\n              if (event.candidate) {\r\n                scrSocket.emit(\r\n                  \"webrtc_ice_candidate\",\r\n                  {\r\n                    roomId,\r\n                    label: event.candidate.sdpMLineIndex,\r\n                    candidate: event.candidate.candidate,\r\n                  },\r\n                  scrId\r\n                );\r\n              }\r\n            };\r\n\r\n            // await createOffer(rtcPeerConnection, userId);\r\n            let sessionDescription;\r\n            try {\r\n              sessionDescription = await rtcPeerConnection.createOffer();\r\n              rtcPeerConnection.setLocalDescription(sessionDescription);\r\n\r\n              scrSocket.emit(\r\n                \"webrtc_offer\",\r\n                {\r\n                  type: \"webrtc_offer\",\r\n                  sdp: sessionDescription,\r\n                  roomId,\r\n                },\r\n                userId,\r\n                scrId,\r\n                true\r\n              );\r\n            } catch (error) {\r\n              console.error(error);\r\n            }\r\n          });\r\n\r\n          scrSocket.on(\"webrtc_offer\", async (event, userId, status) => {\r\n            console.log(\"Socket event callback: webrtc_offer from \" + userId);\r\n\r\n            let rtcPeerConnection = new RTCPeerConnection(iceServers);\r\n            // addLocalTracks(rtcPeerConnection);\r\n            localScreen.getTracks().forEach((track) => {\r\n              rtcPeerConnection.addTrack(track, localScreen);\r\n            });\r\n\r\n            scrConn[userId] = rtcPeerConnection;\r\n\r\n            // rtcPeerConnection.ontrack = (event) => {\r\n            //   setRemoteStream(event, userId);\r\n            // };\r\n            rtcPeerConnection.onicecandidate = (event) => {\r\n              // sendIceCandidate(event, userId);\r\n              if (event.candidate) {\r\n                scrSocket.emit(\r\n                  \"webrtc_ice_candidate\",\r\n                  {\r\n                    roomId,\r\n                    label: event.candidate.sdpMLineIndex,\r\n                    candidate: event.candidate.candidate,\r\n                  },\r\n                  scrId\r\n                );\r\n              }\r\n            };\r\n            rtcPeerConnection.setRemoteDescription(\r\n              new RTCSessionDescription(event)\r\n            );\r\n\r\n            // await createAnswer(rtcPeerConnection, userId);\r\n            let sessionDescription;\r\n            try {\r\n              sessionDescription = await rtcPeerConnection.createAnswer();\r\n              rtcPeerConnection.setLocalDescription(sessionDescription);\r\n\r\n              scrSocket.emit(\r\n                \"webrtc_answer\",\r\n                {\r\n                  type: \"webrtc_answer\",\r\n                  sdp: sessionDescription,\r\n                  roomId,\r\n                },\r\n                userId,\r\n                scrId\r\n              );\r\n            } catch (error) {\r\n              console.error(error);\r\n            }\r\n          });\r\n\r\n          scrSocket.on(\"webrtc_answer\", (event, userId) => {\r\n            console.log(\"Socket event callback: webrtc_answer from \" + userId);\r\n\r\n            scrConn[userId].setRemoteDescription(\r\n              new RTCSessionDescription(event)\r\n            );\r\n          });\r\n\r\n          scrSocket.on(\"webrtc_ice_candidate\", (event, userId) => {\r\n            console.log(\r\n              \"Socket event callback: webrtc_ice_candidate from \" + userId\r\n            );\r\n\r\n            // ICE candidate configuration.\r\n            var candidate = new RTCIceCandidate({\r\n              sdpMLineIndex: event.label,\r\n              candidate: event.candidate,\r\n            });\r\n            scrConn[userId].addIceCandidate(candidate);\r\n          });\r\n\r\n          scrSocket.on(\"user-disconnected\", (userId) => {\r\n            console.log(\"scrSocket disconnecting \" + userId);\r\n\r\n            if (scrConn[userId]) scrConn[userId].close();\r\n\r\n            const audEl = document.getElementById(\"AUD-\" + userId);\r\n            if (audEl) {\r\n              audEl.remove();\r\n            }\r\n            const vidEl = document.getElementById(\"VID-\" + userId);\r\n            if (vidEl) {\r\n              vidEl.remove();\r\n            }\r\n          });\r\n        });\r\n      } catch (error) {\r\n        alert(\"Could not get display media. Try again\");\r\n        console.error(\"Could not get display media\", error);\r\n      }\r\n    } else {\r\n      setScrn(false);\r\n      scrSocket.disconnect();\r\n      scrSocket = null;\r\n\r\n      localScreen.getTracks().forEach((track) => {\r\n        track.stop();\r\n      });\r\n      // document.getElementById(\"my-screen\").remove();\r\n    }\r\n  };\r\n\r\n  const addVideoStream = (videoGrid, video, stream, userId, status) => {\r\n    let div;\r\n\r\n    video.setAttribute(\"id\", \"video-\" + userId);\r\n    video.srcObject = stream;\r\n    video.classList.add(\"video\");\r\n\r\n    video.addEventListener(\"loadedmetadata\", () => {\r\n      video.play();\r\n    });\r\n\r\n    if (userId !== \"my-video\" && userId.substring(4) !== scrId) {\r\n      console.log(userId, userId.substring(3), scrId);\r\n      video.addEventListener(\"dblclick\", () => {\r\n        if (video.requestFullscreen) {\r\n          video.requestFullscreen();\r\n        } else if (video.webkitRequestFullscreen) {\r\n          /* Safari */\r\n          video.webkitRequestFullscreen();\r\n        } else if (video.msRequestFullscreen) {\r\n          /* IE11 */\r\n          video.msRequestFullscreen();\r\n        }\r\n      });\r\n    }\r\n\r\n    if (userId.startsWith(\"VID-\") || userId === \"my-video\") {\r\n      div = document.createElement(\"div\");\r\n      div.setAttribute(\"id\", userId);\r\n      div.classList.add(\"video-wrap\");\r\n\r\n      const cDiv = document.createElement(\"div\");\r\n      cDiv.setAttribute(\"id\", \"prof-\" + userId);\r\n      cDiv.classList.add(\"prof-card\");\r\n      cDiv.classList.add(\"hidden\");\r\n      const p = document.createElement(\"p\");\r\n      p.innerText = userId;\r\n      p.classList.add(\"prof-text\");\r\n\r\n      cDiv.append(p);\r\n\r\n      div.append(video);\r\n      div.append(cDiv);\r\n\r\n      videoGrid.append(div);\r\n\r\n      if (!status) {\r\n        video.classList.add(\"hidden\");\r\n        cDiv.classList.remove(\"hidden\");\r\n      }\r\n    } else {\r\n      videoGrid.append(video);\r\n    }\r\n  };\r\n\r\n  // FUNCTIONS ==================================================================\r\n  function addLocalTracks(rtcPeerConnection) {\r\n    localStream.getTracks().forEach((track) => {\r\n      rtcPeerConnection.addTrack(track, localStream);\r\n    });\r\n  }\r\n\r\n  async function createOffer(rtcPeerConnection, userId) {\r\n    let sessionDescription;\r\n    try {\r\n      sessionDescription = await rtcPeerConnection.createOffer();\r\n      rtcPeerConnection.setLocalDescription(sessionDescription);\r\n\r\n      console.log(\"emitting \", camera);\r\n\r\n      socket.emit(\r\n        \"webrtc_offer\",\r\n        {\r\n          type: \"webrtc_offer\",\r\n          sdp: sessionDescription,\r\n          roomId,\r\n        },\r\n        userId,\r\n        id,\r\n        camera\r\n      );\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  async function createAnswer(rtcPeerConnection, userId) {\r\n    let sessionDescription;\r\n    try {\r\n      sessionDescription = await rtcPeerConnection.createAnswer();\r\n      rtcPeerConnection.setLocalDescription(sessionDescription);\r\n\r\n      socket.emit(\r\n        \"webrtc_answer\",\r\n        {\r\n          type: \"webrtc_answer\",\r\n          sdp: sessionDescription,\r\n          roomId,\r\n        },\r\n        userId,\r\n        id\r\n      );\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  function setRemoteStream(event, userId, status) {\r\n    if (event.track.kind === \"audio\") {\r\n      let audio = document.createElement(\"audio\");\r\n      addVideoStream(\r\n        videoGrid,\r\n        audio,\r\n        event.streams[0],\r\n        \"AUD-\" + userId,\r\n        status\r\n      );\r\n    } else if (event.track.kind === \"video\") {\r\n      let video = document.createElement(\"video\");\r\n      video.muted = true;\r\n      addVideoStream(\r\n        videoGrid,\r\n        video,\r\n        event.streams[0],\r\n        \"VID-\" + userId,\r\n        status\r\n      );\r\n    }\r\n  }\r\n\r\n  function sendIceCandidate(event, userId) {\r\n    if (event.candidate) {\r\n      socket.emit(\r\n        \"webrtc_ice_candidate\",\r\n        {\r\n          roomId,\r\n          label: event.candidate.sdpMLineIndex,\r\n          candidate: event.candidate.candidate,\r\n        },\r\n        id\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div id=\"video-grid\" className={classes.grid}>\r\n        {loading ? <CircularProgress style={{ margin: \"auto\" }} /> : null}\r\n      </div>\r\n      {showControls ? (\r\n        <div className={classes.controls}>\r\n          <div className={classes.panel}>\r\n            {join === -1 ? (\r\n              <Button\r\n                variant=\"outlined\"\r\n                onClick={() => {\r\n                  connectToSocket();\r\n                  setJoin(0);\r\n                }}\r\n                className={classes.join}\r\n              >\r\n                Join\r\n              </Button>\r\n            ) : join === 0 ? (\r\n              <div>\r\n                <CircularProgress\r\n                  style={{ width: \"30px\", height: \"30px\", margin: \"0px 15px\" }}\r\n                />\r\n              </div>\r\n            ) : null}\r\n            <IconButton\r\n              style={{ color: mic ? \"white\" : \"red\", marginRight: \"10px\" }}\r\n              onClick={() => {\r\n                toggleMic(join === 1);\r\n              }}\r\n            >\r\n              {mic ? (\r\n                <MicRoundedIcon style={{ fontSize: \"30px\" }} />\r\n              ) : (\r\n                <MicOffRoundedIcon style={{ fontSize: \"30px\" }} />\r\n              )}\r\n            </IconButton>\r\n            <IconButton\r\n              style={{\r\n                color: cam ? \"white\" : \"red\",\r\n                marginLeft: \"10px\",\r\n                marginRight: \"10px\",\r\n              }}\r\n              onClick={() => {\r\n                toggleCam(join === 1);\r\n              }}\r\n            >\r\n              {cam ? (\r\n                <VideocamRoundedIcon style={{ fontSize: \"30px\" }} />\r\n              ) : (\r\n                <VideocamOffRoundedIcon style={{ fontSize: \"30px\" }} />\r\n              )}\r\n            </IconButton>\r\n            {join === 1 ? (\r\n              <IconButton\r\n                style={{ color: scrn ? \"white\" : \"red\", marginLeft: \"10px\" }}\r\n                onClick={() => {\r\n                  // toggleScrn();\r\n                  screenShare();\r\n                }}\r\n              >\r\n                {scrn ? (\r\n                  <ScreenShareRoundedIcon style={{ fontSize: \"30px\" }} />\r\n                ) : (\r\n                  <StopScreenShareRoundedIcon style={{ fontSize: \"30px\" }} />\r\n                )}\r\n              </IconButton>\r\n            ) : null}\r\n            {/* <IconButton\r\n          style={{ marginLeft: \"20px\", display: \"none\" }}\r\n          ref={flipButton}\r\n        >\r\n          <FlipCameraAndroidIcon style={{ fontSize: \"30px\" }} />\r\n        </IconButton> */}\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n\r\n      {join === 1 ? (\r\n        <div className={classes.chat}>\r\n          <div\r\n            style={{\r\n              position: \"fixed\",\r\n              top: \"10px\",\r\n              right: \"20px\",\r\n              backgroundColor: \"rgb(60,60,60,0.7)\",\r\n              borderRadius: \"30px\",\r\n            }}\r\n          >\r\n            <IconButton\r\n              color=\"inherit\"\r\n              aria-label=\"open drawer\"\r\n              edge=\"end\"\r\n              onClick={handleDrawerOpenA}\r\n              className={clsx(open && classes.hide)}\r\n              style={{ color: \"white\", margin: \"0px 5px 0px 8px\" }}\r\n            >\r\n              <PeopleAltOutlinedIcon />\r\n            </IconButton>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              aria-label=\"open drawer\"\r\n              edge=\"end\"\r\n              onClick={handleDrawerOpen}\r\n              className={clsx(open && classes.hide)}\r\n              style={{ color: \"white\", marginRight: \"8px\" }}\r\n            >\r\n              <Badge\r\n                color=\"primary\"\r\n                invisible={messageCount === 0}\r\n                badgeContent={messageCount}\r\n              >\r\n                <ForumIcon />\r\n              </Badge>\r\n            </IconButton>\r\n          </div>\r\n          <Drawer\r\n            className={classes.drawer}\r\n            variant=\"persistent\"\r\n            anchor=\"right\"\r\n            open={openA}\r\n            classes={{\r\n              paper: classes.drawerPaper,\r\n            }}\r\n          >\r\n            <div className={classes.drawerHeader}>\r\n              <IconButton onClick={handleDrawerCloseA}>\r\n                {theme.direction === \"rtl\" ? (\r\n                  <ChevronLeftIcon />\r\n                ) : (\r\n                  <ChevronRightIcon />\r\n                )}\r\n              </IconButton>\r\n              Attendees\r\n            </div>\r\n            <Divider />\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                height: \"100%\",\r\n                margin: \"10px\",\r\n              }}\r\n            >\r\n              <div className={classes.user}>\r\n                <div>{id + \" (You)\"}</div>\r\n                <div\r\n                  style={{\r\n                    width: \"80px\",\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-around\",\r\n                  }}\r\n                >\r\n                  {/* <MicRoundedIcon style={{ color: \"rgb(68, 165, 244)\" }} /> */}\r\n                  <MicOffRoundedIcon style={{ color: \"rgb(100,100,100)\" }} />\r\n                  {/* <VideocamRoundedIcon style={{ color: \"red\" }} /> */}\r\n                  <VideocamOffRoundedIcon\r\n                    style={{ color: \"rgb(100,100,100)\" }}\r\n                  />\r\n                </div>\r\n              </div>\r\n              {users.map((el, index) => {\r\n                return (\r\n                  <div className={classes.user} key={\"attendee-\" + index}>\r\n                    <div>{el}</div>\r\n                    <div\r\n                      style={{\r\n                        width: \"80px\",\r\n                        display: \"flex\",\r\n                        justifyContent: \"space-around\",\r\n                      }}\r\n                    >\r\n                      <MicRoundedIcon style={{ color: \"rgb(0,140,200)\" }} />\r\n                      <VideocamRoundedIcon\r\n                        style={{ color: \"rgb(0,140,200)\" }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </Drawer>\r\n          <Drawer\r\n            className={classes.drawer}\r\n            variant=\"persistent\"\r\n            anchor=\"right\"\r\n            open={open}\r\n            classes={{\r\n              paper: classes.drawerPaper,\r\n            }}\r\n          >\r\n            <div className={classes.drawerHeader}>\r\n              <IconButton onClick={handleDrawerClose}>\r\n                {theme.direction === \"rtl\" ? (\r\n                  <ChevronLeftIcon />\r\n                ) : (\r\n                  <ChevronRightIcon />\r\n                )}\r\n              </IconButton>\r\n              Conversation\r\n            </div>\r\n            <Divider />\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                justifyContent: \"space-between\",\r\n                height: \"100%\",\r\n                margin: \"10px\",\r\n              }}\r\n            >\r\n              <Messages messages={messages} />\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"space-between\",\r\n                  alignItems: \"center\",\r\n                }}\r\n              >\r\n                <textarea\r\n                  ref={chatBox}\r\n                  type=\"text\"\r\n                  placeholder=\"Type a message\"\r\n                  className={classes.inputBox}\r\n                  value={inputString}\r\n                  onChange={(val) => {\r\n                    handleChange(val);\r\n                  }}\r\n                ></textarea>\r\n                <IconButton\r\n                  disabled={inputString === \"\"}\r\n                  onClick={() => {\r\n                    sendMessage();\r\n                  }}\r\n                >\r\n                  <SendIcon />\r\n                </IconButton>\r\n              </div>\r\n            </div>\r\n          </Drawer>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Meeting;\r\n","import React, { useEffect, useState } from \"react\";\r\n\r\nimport GoogleLogin from \"react-google-login\";\r\n\r\nimport {\r\n  Typography,\r\n  Button,\r\n  Snackbar,\r\n  SvgIcon,\r\n  CircularProgress,\r\n  Avatar,\r\n} from \"@material-ui/core\";\r\nimport CallIcon from \"@material-ui/icons/Call\";\r\n\r\nimport MuiAlert from \"@material-ui/lab/Alert\";\r\n\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nconst Alert = (props) => {\r\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n};\r\n\r\nconst Home = () => {\r\n  const navigate = useNavigate();\r\n\r\n  const [roomId, setRoomId] = useState(\"\");\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const [status, setStatus] = useState(0);\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const url = window.location.pathname;\r\n    console.log(url);\r\n    if (url !== \"/\") setRoomId(url.substr(1));\r\n    else\r\n      axios\r\n        .get(\"/api/call\")\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          setRoomId(res.data);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err.response);\r\n        });\r\n  }, []);\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === \"clickaway\") {\r\n      return;\r\n    }\r\n\r\n    setOpen(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      setStatus(1);\r\n    }\r\n  }, [user]);\r\n\r\n  const successResponseGoogle = (res) => {\r\n    console.log(\"logging in ...\");\r\n    console.log(res);\r\n\r\n    setUser(res.profileObj);\r\n  };\r\n\r\n  const failureResponseGoogle = (res) => {\r\n    console.log(res);\r\n    if (!user) {\r\n      setStatus(-1);\r\n    }\r\n  };\r\n\r\n  const onAutoLoadFinished = (res) => {\r\n    if (!res) setStatus(-1);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        minHeight: \"100vh\",\r\n        margin: \"0px 30px\",\r\n      }}\r\n    >\r\n      <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n        <CallIcon\r\n          style={{\r\n            width: \"50px\",\r\n            height: \"50px\",\r\n            marginRight: \"14px\",\r\n            color: \"rgb(0, 131, 255)\",\r\n          }}\r\n        />\r\n        <h1 style={{ textAlign: \"left\", padding: \"20px 0px\", margin: 0 }}>\r\n          Conference Call\r\n        </h1>\r\n      </div>\r\n      <div\r\n        style={{\r\n          dispaly: \"flex\",\r\n          flexDirection: \"column\",\r\n          maxWidth: \"fit-content\",\r\n          margin: \"100px auto 0px auto\",\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            flexWrap: \"wrap\",\r\n            margin: \"20px 0px\",\r\n          }}\r\n        >\r\n          <Typography style={{ fontSize: \"18px\" }}>\r\n            Meeting ID&nbsp;&nbsp;&nbsp;\r\n          </Typography>\r\n          <div style={{ display: \"flex\", maxWidth: \"100%\" }}>\r\n            <div\r\n              style={{\r\n                padding: \"10px 14px\",\r\n                overflowY: \"overlay\",\r\n                backgroundColor: \"rgb(0,0,0,0.1)\",\r\n              }}\r\n            >\r\n              <Typography style={{ whiteSpace: \"nowrap\" }}>{roomId}</Typography>\r\n            </div>\r\n            <Button\r\n              variant=\"outlined\"\r\n              style={{ borderRadius: 0 }}\r\n              onClick={() => {\r\n                const el = document.createElement(\"textarea\");\r\n                if (window.location.pathname === \"/\")\r\n                  el.value = window.location.href + roomId;\r\n                else el.value = window.location.href;\r\n\r\n                document.body.appendChild(el);\r\n                el.select();\r\n                document.execCommand(\"copy\");\r\n                document.body.removeChild(el);\r\n\r\n                setOpen(true);\r\n              }}\r\n            >\r\n              COPY\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <div style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          {user ? (\r\n            <Button\r\n              variant=\"contained\"\r\n              style={{\r\n                backgroundColor: \"rgb(0, 131, 255)\",\r\n                color: \"white\",\r\n              }}\r\n              onClick={() => {\r\n                navigate(`/${roomId}`, { state: { user } });\r\n              }}\r\n            >\r\n              {window.location.pathname === \"/\"\r\n                ? \"START MEETING\"\r\n                : \"JOIN MEETING\"}\r\n            </Button>\r\n          ) : null}\r\n        </div>\r\n        <Snackbar open={open} autoHideDuration={3000} onClose={handleClose}>\r\n          <Alert severity=\"success\" onClose={handleClose}>\r\n            Copied to Clipboard\r\n          </Alert>\r\n        </Snackbar>\r\n      </div>\r\n      <div style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n        <GoogleLogin\r\n          className=\"google-login\"\r\n          clientId=\"673970648113-sle0qvep0tjdcnfroiqeoetgrbcn8k88.apps.googleusercontent.com\"\r\n          render={(renderProps) => {\r\n            if (status === -1)\r\n              return (\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  color=\"default\"\r\n                  onClick={renderProps.onClick}\r\n                  style={{\r\n                    // color: \"white\",\r\n                    padding: 10,\r\n                    margin: 20,\r\n                    textTransform: \"none\",\r\n                    // background: '#ccd0dd'\r\n                  }}\r\n                >\r\n                  <SvgIcon>\r\n                    <g\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                      transform=\"matrix(1, 0, 0, 1, 27.009001, -39.238998)\"\r\n                    >\r\n                      <path\r\n                        fill=\"#4285F4\"\r\n                        d=\"M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z\"\r\n                      />\r\n                      <path\r\n                        fill=\"#34A853\"\r\n                        d=\"M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.444 63.239 -14.754 63.239 Z\"\r\n                      />\r\n                      <path\r\n                        fill=\"#FBBC05\"\r\n                        d=\"M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.724 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z\"\r\n                      />\r\n                      <path\r\n                        fill=\"#EA4335\"\r\n                        d=\"M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.789 L -6.734 42.369 C -8.804 40.429 -11.514 39.239 -14.754 39.239 C -19.444 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z\"\r\n                      />\r\n                    </g>\r\n                  </SvgIcon>\r\n                  &nbsp;&nbsp; Login with Google\r\n                </Button>\r\n              );\r\n            else if (status === 1)\r\n              return (\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  color=\"default\"\r\n                  onClick={renderProps.onClick}\r\n                  style={{\r\n                    // color: \"white\",\r\n                    padding: 5,\r\n                    margin: 30,\r\n                    textTransform: \"none\",\r\n                    borderRadius: 20,\r\n                    // background: '#ccd0dd'\r\n                  }}\r\n                >\r\n                  <Avatar\r\n                    src={user.imageUrl}\r\n                    alt={user.givenName}\r\n                    style={{ width: \"25px\", height: \"25px\" }}\r\n                  />\r\n                  <div style={{ padding: \"0px 10px 0px 10px\" }}>\r\n                    <p style={{ margin: 0 }}> {user.email}</p>\r\n                  </div>\r\n                </Button>\r\n              );\r\n            return (\r\n              <CircularProgress\r\n                style={{ color: \"rgb(0, 131, 255)\", margin: \"40px 0px\" }}\r\n              />\r\n            );\r\n          }}\r\n          isSignedIn={true}\r\n          onSuccess={successResponseGoogle}\r\n          onFailure={failureResponseGoogle}\r\n          cookiePolicy={\"single_host_origin\"}\r\n          icon={false}\r\n          padding={100}\r\n          onAutoLoadFinished={onAutoLoadFinished}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles({\r\n  bubble: {\r\n    boxShadow: \"0px 1px 5px rgb(40,40,40,0.2)\",\r\n    padding: \"2px 9px\",\r\n    borderRadius: \"13px\",\r\n    margin: \"2px 3px\",\r\n  },\r\n});\r\n\r\nconst Messages = ({ messages }) => {\r\n  const classes = useStyles();\r\n\r\n  const [chat, setChat] = useState(messages);\r\n\r\n  useEffect(() => {\r\n    setChat(messages);\r\n  }, [messages]);\r\n\r\n  return (\r\n    <div\r\n      id=\"chat-screen\"\r\n      style={{\r\n        overflowY: \"auto\",\r\n        height: \"calc(100vh - 240px)\",\r\n        padding: \"0px 10px\",\r\n        display: \"flex\",\r\n        flexDirection: \"column-reverse\",\r\n      }}\r\n    >\r\n      {chat\r\n        .slice(0)\r\n        .reverse()\r\n        .map((msg, index) => {\r\n          const time = msg.time.toTimeString();\r\n          let timeString = time.split(\":\")[0] + \":\" + time.split(\":\")[1];\r\n          if (parseInt(time.split(\":\")[0]) < 12) timeString += \" AM\";\r\n          else timeString += \" PM\";\r\n          return (\r\n            <div key={\"message-\" + index}>\r\n              <div\r\n                style={{\r\n                  fontSize: \"14px\",\r\n                  display: \"flex\",\r\n                  justifyContent: msg.user === \"me\" ? \"flex-end\" : \"flex-start\",\r\n                  textAlign: \"left\",\r\n                }}\r\n              >\r\n                <div\r\n                  className={classes.bubble}\r\n                  style={{\r\n                    backgroundColor:\r\n                      msg.user === \"me\" ? \"rgb(0, 101, 255,0.3)\" : \"white\",\r\n                    whiteSpace: \"pre-wrap\",\r\n                  }}\r\n                >\r\n                  {msg.message.split(\"\\n\").map((part, ind) => {\r\n                    if (part === \"\") return <br key={\"part-\" + ind} />;\r\n                    return (\r\n                      <React.Fragment key={\"part-\" + ind}>\r\n                        <p\r\n                          style={{\r\n                            padding: 0,\r\n                            margin: 0,\r\n                            maxWidth: \"min(60vw,250px)\",\r\n                            wordWrap: \"break-word\",\r\n                          }}\r\n                        >\r\n                          {part}\r\n                        </p>\r\n                      </React.Fragment>\r\n                    );\r\n                  })}\r\n                  <div\r\n                    style={{\r\n                      fontSize: \"10px\",\r\n                      color: \"grey\",\r\n                      textAlign: \"right\",\r\n                    }}\r\n                  >\r\n                    {timeString}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div\r\n                style={{\r\n                  fontWeight: \"600\",\r\n                  textAlign: msg.user === \"me\" ? \"right\" : \"left\",\r\n                  margin: \"0px 5px\",\r\n                  fontSize: \"13px\",\r\n                }}\r\n              >\r\n                {index === 0\r\n                  ? msg.user === \"me\"\r\n                    ? \"You\"\r\n                    : msg.user\r\n                  : msg.user !== chat[chat.length - index].user\r\n                  ? msg.user === \"me\"\r\n                    ? \"You\"\r\n                    : msg.user\r\n                  : null}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Messages;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport Home from \"./components/Home\";\r\nimport Meeting from \"./components/Meeting\";\r\n\r\nimport { useNavigate, useLocation } from \"react-router\";\r\n\r\nconst Layout = () => {\r\n  const location = useLocation();\r\n  const [flag, setFlag] = useState(location.state);\r\n\r\n  useEffect(() => {\r\n    console.log(location.state);\r\n    setFlag(location.state);\r\n\r\n    if (location.state) window.history.replaceState({}, document.title);\r\n  }, [location]);\r\n\r\n  //   useEffect(() => {\r\n  //     console.log(flag);\r\n  //   }, []);\r\n\r\n  const updateUser = (user) => {\r\n    setFlag({ state: { user } });\r\n  };\r\n\r\n  if (!flag || !flag.user) return <Home updateFlag={updateUser} />;\r\n\r\n  return <Meeting user={flag.user} />;\r\n};\r\n\r\nexport default Layout;\r\n","import React from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nimport Layout from \"./Layout\";\r\n\r\nconst routes = [\r\n  {\r\n    path: \"/\",\r\n    // element: <Layout />,\r\n    children: [\r\n      { path: \"/\", element: <Layout /> },\r\n      { path: \"/:roomId\", element: <Layout /> },\r\n      { path: \"*\", element: <Navigate to=\"/\" replace /> },\r\n    ],\r\n  },\r\n];\r\n\r\nexport default routes;\r\n","import React from \"react\";\r\n\r\nimport routes from \"./routes\";\r\n\r\nimport { useRoutes } from \"react-router-dom\";\r\nimport { SnackbarProvider } from \"notistack\";\r\n\r\nfunction App() {\r\n  const routing = useRoutes(routes);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <SnackbarProvider maxSnack={3}>{routing}</SnackbarProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <App />\r\n  </BrowserRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}